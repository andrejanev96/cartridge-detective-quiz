import{r as O,a as Ht,g as Gt,R as L}from"./vendor-57209f9c.js";import{m as _,A as Se}from"./animations-d886bd4a.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();var St={exports:{}},Fe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yt=O,Kt=Symbol.for("react.element"),Jt=Symbol.for("react.fragment"),Xt=Object.prototype.hasOwnProperty,Zt=Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,es={key:!0,ref:!0,__self:!0,__source:!0};function jt(e,s,t){var r,a={},n=null,u=null;t!==void 0&&(n=""+t),s.key!==void 0&&(n=""+s.key),s.ref!==void 0&&(u=s.ref);for(r in s)Xt.call(s,r)&&!es.hasOwnProperty(r)&&(a[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:Kt,type:e,key:n,ref:u,props:a,_owner:Zt.current}}Fe.Fragment=Jt;Fe.jsx=jt;Fe.jsxs=jt;St.exports=Fe;var l=St.exports,ze={},at=Ht;ze.createRoot=at.createRoot,ze.hydrateRoot=at.hydrateRoot;const Ue=({size:e="large"})=>e==="small"?l.jsx("div",{className:"logo-small",children:l.jsx("div",{className:"logo-shield-small",children:l.jsx("span",{className:"logo-text-small",children:"AMMO"})})}):l.jsx("div",{className:"logo",children:l.jsx("div",{className:"logo-shield",children:l.jsx("span",{className:"logo-text",children:"AMMO"})})});function _t(e){var s,t,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(s=0;s<a;s++)e[s]&&(t=_t(e[s]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function _e(){for(var e,s,t=0,r="",a=arguments.length;t<a;t++)(e=arguments[t])&&(s=_t(e))&&(r&&(r+=" "),r+=s);return r}const fe=({variant:e="primary",children:s,className:t,...r})=>l.jsx("button",{className:_e("btn",{"btn-primary":e==="primary","btn-secondary":e==="secondary","btn-social":e==="social"},t),...r,children:s}),nt=e=>{let s;const t=new Set,r=(p,x)=>{const g=typeof p=="function"?p(s):p;if(!Object.is(g,s)){const F=s;s=x??(typeof g!="object"||g===null)?g:Object.assign({},s,g),t.forEach(T=>T(s,F))}},a=()=>s,b={setState:r,getState:a,getInitialState:()=>w,subscribe:p=>(t.add(p),()=>t.delete(p)),destroy:()=>{t.clear()}},w=s=e(r,a,b);return b},ts=e=>e?nt(e):nt;var Et={exports:{}},kt={},Ct={exports:{}},Ft={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me=O;function ss(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var rs=typeof Object.is=="function"?Object.is:ss,is=me.useState,as=me.useEffect,ns=me.useLayoutEffect,os=me.useDebugValue;function ls(e,s){var t=s(),r=is({inst:{value:t,getSnapshot:s}}),a=r[0].inst,n=r[1];return ns(function(){a.value=t,a.getSnapshot=s,qe(a)&&n({inst:a})},[e,t,s]),as(function(){return qe(a)&&n({inst:a}),e(function(){qe(a)&&n({inst:a})})},[e]),os(t),t}function qe(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!rs(e,t)}catch{return!0}}function cs(e,s){return s()}var us=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cs:ls;Ft.useSyncExternalStore=me.useSyncExternalStore!==void 0?me.useSyncExternalStore:us;Ct.exports=Ft;var ds=Ct.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ne=O,fs=ds;function ms(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var hs=typeof Object.is=="function"?Object.is:ms,ys=fs.useSyncExternalStore,gs=Ne.useRef,ps=Ne.useEffect,xs=Ne.useMemo,vs=Ne.useDebugValue;kt.useSyncExternalStoreWithSelector=function(e,s,t,r,a){var n=gs(null);if(n.current===null){var u={hasValue:!1,value:null};n.current=u}else u=n.current;n=xs(function(){function b(F){if(!w){if(w=!0,p=F,F=r(F),a!==void 0&&u.hasValue){var T=u.value;if(a(T,F))return x=T}return x=F}if(T=x,hs(p,F))return T;var N=r(F);return a!==void 0&&a(T,N)?(p=F,T):(p=F,x=N)}var w=!1,p,x,g=t===void 0?null:t;return[function(){return b(s())},g===null?void 0:function(){return b(g())}]},[s,t,r,a]);var d=ys(e,n[0],n[1]);return ps(function(){u.hasValue=!0,u.value=d},[d]),vs(d),d};Et.exports=kt;var bs=Et.exports;const ws=Gt(bs),{useDebugValue:As}=L,{useSyncExternalStoreWithSelector:Ss}=ws;const js=e=>e;function _s(e,s=js,t){const r=Ss(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,t);return As(r),r}const ot=e=>{const s=typeof e=="function"?ts(e):e,t=(r,a)=>_s(s,r,a);return Object.assign(t,s),t},Es=e=>e?ot(e):ot,ks=async(e,s,t)=>{const r={}.VITE_MAILCHIMP_API_KEY,a={}.VITE_MAILCHIMP_SERVER_PREFIX,n={}.VITE_MAILCHIMP_LIST_ID;if(!r||!a||!n)return!0;try{const u=`https://${a}.api.mailchimp.com/3.0/lists/${n}/members`,d={email_address:e,status:s?"subscribed":"unsubscribed",tags:["cartridge-quiz"],merge_fields:{QUIZ_SCORE:t==null?void 0:t.score,QUIZ_TIER:t==null?void 0:t.tier,QUIZ_DATE:new Date().toISOString().split("T")[0]}},b=await fetch(u,{method:"POST",headers:{Authorization:`Basic ${btoa(`anystring:${r}`)}`,"Content-Type":"application/json"},body:JSON.stringify(d)});return b.ok?!0:(await b.json(),!1)}catch{return!1}},Cs=async(e,s)=>new Promise(t=>{setTimeout(()=>{t(!0)},1e3)}),Fs=e=>{const s=document.createElement("script");s.async=!0,s.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(s),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",e)},ue=(e,s)=>{typeof window.gtag<"u"&&window.gtag("event",e,s)},oe={quizStarted:()=>ue("quiz_started",{content_type:"quiz",content_id:"cartridge_detective_challenge"}),questionAnswered:(e,s,t)=>ue("question_answered",{question_index:e,is_correct:s,question_category:t}),quizCompleted:e=>ue("quiz_completed",{score:e.score,total_questions:e.totalQuestions,accuracy:e.accuracy,tier:e.tier,newsletter_signup:e.subscribeToBulletin,conversion:!0}),emailSubmitted:e=>ue("email_submitted",{newsletter_signup:e,lead_generated:!0}),socialShare:(e,s,t)=>ue("social_share",{platform:e,score:s,tier:t}),retakeQuiz:()=>ue("quiz_retake")},lt={}.VITE_GA4_MEASUREMENT_ID;lt&&Fs(lt);const Ns=[{type:"multiple-choice",title:"Weight Weight… Don't Tell Me!",category:"Cartridge Identification",question:"How heavy is its bullet, probably?",image:"assets/images/cartridges/question1.jpg",answers:["185, 200, or 230 grains","165, 180, or 200 grains","115, 124 or 147 grains","85, 90, or 95 grains"],correct:2,explanation:"This appears to be a 9mm cartridge. The 9mm Parabellum typically uses bullets weighing 115, 124, or 147 grains, making it a popular intermediate-weight handgun cartridge."},{type:"multiple-choice",title:"Browning's Bright Ideas",category:"Historical Development",question:"In which order were the following Automatic Colt Pistol cartridges designed?",image:"assets/images/cartridges/question2.jpg",answers:["32 ACP, 380 ACP, 45 ACP","45 ACP, 380 ACP, 32 ACP","380 ACP, 32 ACP, 45 ACP","32 ACP, 45 ACP, 380 ACP"],correct:3,explanation:"John Moses Browning designed these cartridges in the order: .32 ACP (1899), .45 ACP (1904), and .380 ACP (1908). The .32 ACP came first, followed by the powerful .45 ACP, and finally the .380 ACP."},{type:"multiple-choice",title:"1963",category:"Historical Events",question:"",image:"assets/images/cartridges/question3.jpg",answers:["6.5x52mm Carcano","7.92x57mm Mauser","303 British","7.62x54mmR"],correct:0,explanation:"The 6.5x52mm Carcano was the cartridge used in the Mannlicher-Carcano rifle during the assassination of President Kennedy in Dallas, Texas, on November 22, 1963."},{type:"multiple-choice",title:'"I never miss."',category:"Film and Pop Culture",question:"",image:"assets/images/cartridges/question4.jpg",answers:["455 Webley","32 ACP","9mm Parabellum","45 ACP"],correct:1,explanation:"In Ian Fleming's original novels, James Bond carried a .32 ACP in his Walther PPK. Though the films often showed him using other cartridges, the .32 ACP was his literary signature round."},{type:"multiple-choice",title:"A Garand Old Time",category:"Military History",question:"How heavy is its bullet, probably?",image:"assets/images/cartridges/question5.jpg",answers:["150, 165, or 180 grains","120, 130 or 140 grains","110, 150 or 200 grains","300, 325 or 405 grains"],correct:0,explanation:"The .30-06 Springfield, used in the M1 Garand rifle, typically fires bullets weighing 150, 165, or 180 grains. The 150-grain M2 Ball was the standard military load during WWII."}],Vs=[{type:"multiple-choice",title:"No Pressure",category:"Technical Specifications",question:"Which of the following *does not* have official +P specs?",image:"assets/images/cartridges/question6.jpg",answers:["9mm","38 Special","45 ACP","40 S&W"],correct:3,explanation:"The .40 S&W does not have official +P specifications. While .9mm, .38 Special, and .45 ACP all have SAAMI-approved +P loadings, the .40 S&W was designed to operate at higher pressures from the start."},{type:"multiple-choice",title:"Signed, SEALed, Delivered",category:"Military Applications",question:"",image:"assets/images/cartridges/question7.jpg",answers:["308 Winchester","300 Winchester Magnum","338 Lapua Magnum","50 Browning Machine Gun"],correct:1,explanation:"The .300 Winchester Magnum is primarily used by Navy SEALs for long-range precision work. This cartridge offers excellent ballistics and accuracy for extended-range engagements."},{type:"slider",title:"Elmer's Pride",category:"Ballistics",question:"What is its advertised muzzle velocity?",image:"assets/images/cartridges/question8.jpg",min:1e3,max:1500,unit:"fps",correct:1235,tolerance:50,step:1,explanation:"The .44 Magnum, Elmer Keith's pride and joy, typically achieves a muzzle velocity of around 1,235 fps with a 240-grain bullet, making it one of the most powerful handgun cartridges."},{type:"multiple-choice",title:"Let's Get It Started",category:"Historical Events",question:"",image:"assets/images/cartridges/question9.jpg",answers:["25 ACP","32 ACP","45 ACP","380 ACP"],correct:3,explanation:"Gavrilo Princip used a .380 ACP cartridge in his FN Model 1910 pistol to assassinate Archduke Franz Ferdinand in Sarajevo on June 28, 1914, sparking World War I."},{type:"multiple-choice",title:"Because the South Atlantic Doesn't Matter",category:"NATO Standards",question:"Which of the following doesn't belong?",image:"assets/images/cartridges/question10.jpg",answers:["12.7x99mm","5.56x45mm","7.62x35mm","5.7x28mm"],correct:2,explanation:"The 7.62x35mm (.300 Blackout) is not a NATO standard cartridge. The others - 12.7x99mm (.50 BMG), 5.56x45mm, and 5.7x28mm - are all NATO standardized rounds."},{type:"multiple-choice",title:"This Is Going to Sting",category:"Wildcat Cartridges",question:"Which of the following doesn't belong?",image:"assets/images/cartridges/question11.jpg",answers:["17 Mosquito","22 Hornet","218 Bee","219 Wasp"],correct:0,explanation:"The .17 Mosquito doesn't belong as it's not part of the classic family of small, fast cartridges. The .22 Hornet, .218 Bee, and .219 Wasp are all related high-velocity varmint cartridges from the same era."}],Ds=[{type:"slider",title:"The Genuine ARticle",category:"Ballistics",question:'What is its muzzle velocity out of a 20" barrel?',image:"assets/images/cartridges/question12.jpg",min:2750,max:3425,unit:"fps",correct:3060,tolerance:75,step:10,explanation:"The 5.56x45mm NATO cartridge achieves approximately 3,060 fps muzzle velocity from a 20-inch barrel with the standard M855 62-grain bullet, making it highly effective at intermediate ranges."},{type:"multiple-choice",title:"Do You Feel Lucky?",category:"Film and Pop Culture",question:"",image:"assets/images/cartridges/question13.jpg",answers:["5.7×15mmR","10.9x24mmR","10.9×29mmR","10.9x33mmR"],correct:3,explanation:"Dirty Harry's iconic .44 Magnum revolver fired the 10.9x33mmR (.44 Magnum) cartridge. This powerful round became famous from Clint Eastwood's character calling it 'the most powerful handgun in the world.'"},{type:"multiple-choice",title:"AR You Feeling It?",category:"Platform Compatibility",question:"Which of the following doesn't belong?",image:"assets/images/cartridges/question14.jpg",answers:["22 Long Rifle","6.5mm Grendel","6.5mm Creedmoor","5.56x45mm"],correct:2,explanation:"The 6.5mm Creedmoor doesn't belong because it requires a larger AR-10 platform, while .22 LR, 6.5mm Grendel, and 5.56x45mm can all be used in AR-15 platform rifles with appropriate modifications."},{type:"multiple-choice",title:"A Snappy Comeback",category:"Historical Firearms",question:"",image:"assets/images/cartridges/question15.jpg",answers:["9x19mm Parabellum","45 ACP","32 ACP","7.65x21mm Parabellum"],correct:1,explanation:"The Thompson submachine gun (Tommy Gun) that Winston Churchill is shown with fires the .45 ACP cartridge. The Tommy Gun was chambered in .45 ACP and became iconic during WWII for its stopping power."}],Ts={questionsPerQuiz:15,questionsPerDifficulty:{easy:5,medium:6,hard:4}},Ps={easy:Ns,medium:Vs,hard:Ds,settings:Ts},ct=[{name:"Recruit Detective",range:[0,3],icon:"🎯",description:"You're new to cartridge identification. Every expert started here - keep learning!"},{name:"Cartridge Spotter",range:[4,6],icon:"🏅",description:"You can identify some common cartridges. Your detective skills are developing!"},{name:"Ammunition Expert",range:[7,9],icon:"⭐",description:"Impressive knowledge! You can identify most cartridges and understand their history."},{name:"Master Cartridge Detective",range:[10,12],icon:"🎖️",description:"Exceptional expertise! You have deep cartridge knowledge that rivals collectors."},{name:"Arsenal Commander",range:[13,15],icon:"👑",description:"Elite cartridge authority! Your knowledge is comprehensive and you're among the top detectives."}],G=Es((e,s)=>({currentQuestion:0,score:0,selectedAnswer:null,userAnswers:[],streak:0,maxStreak:0,quizData:[],isQuizActive:!1,currentSection:"landing",startQuiz:async()=>{oe.quizStarted(),await s().loadQuestions(),e({currentSection:"quiz",isQuizActive:!0,userAnswers:[]})},loadQuestions:async()=>{s().generateQuiz(Ps)},generateQuiz:t=>{const r=t.settings,a=[];["easy","medium","hard"].forEach(n=>{const u=r.questionsPerDifficulty[n],d=[...t[n]];for(let b=0;b<u&&d.length>0;b++){const w=Math.floor(Math.random()*d.length),p=d.splice(w,1)[0];a.push({...p,id:`${n}-${b}`,difficulty:n})}}),e({quizData:a})},selectAnswer:t=>{e({selectedAnswer:t})},nextQuestion:()=>{const t=s(),r=t.quizData[t.currentQuestion];let a=!1,n=t.selectedAnswer;switch(r.type){case"multiple-choice":case"image-multiple-choice":a=t.selectedAnswer===r.correct,n=r.answers[t.selectedAnswer];break;case"true-false":a=t.selectedAnswer===r.correct;break;case"text-input":a=r.acceptableAnswers.some(x=>x.toLowerCase()===String(t.selectedAnswer).toLowerCase());break;case"slider":a=Math.abs(t.selectedAnswer-r.correct)<=r.tolerance,n=`${t.selectedAnswer} ${r.unit}`;break;case"drag-drop":a=Object.keys(r.correctMatches).every(x=>t.selectedAnswer[x]===r.correctMatches[x]);break}const u={question:r,userAnswer:n,isCorrect:a,questionIndex:t.currentQuestion},d=[...t.userAnswers,u],b=a?t.score+1:t.score,w=a?t.streak+1:0,p=Math.max(t.maxStreak,w);e({userAnswers:d,score:b,streak:w,maxStreak:p}),oe.questionAnswered(t.currentQuestion,a,r.category),t.currentQuestion+1<t.quizData.length?(e({currentQuestion:t.currentQuestion+1}),s().resetQuestionState()):e({currentSection:"emailCapture",isQuizActive:!1})},submitEmail:async(t,r)=>{const a=s(),n=s().getTier(a.score),u=Math.round(a.score/a.quizData.length*100);oe.emailSubmitted(r),oe.quizCompleted({score:a.score,totalQuestions:a.quizData.length,accuracy:u,tier:n.name,subscribeToBulletin:r});try{await ks(t,r,{score:a.score,tier:n.name,accuracy:u}),await Cs(t,{score:a.score,totalQuestions:a.quizData.length,tier:n,userAnswers:a.userAnswers,accuracy:u})}catch{}e({currentSection:"results"})},showSection:t=>{e({currentSection:t})},retakeQuiz:()=>{oe.retakeQuiz(),e({currentQuestion:0,score:0,selectedAnswer:null,streak:0,maxStreak:0,userAnswers:[],currentSection:"landing",isQuizActive:!1}),s().resetQuestionState()},resetQuestionState:()=>{e({selectedAnswer:null})},getTier:t=>{for(const r of ct)if(t>=r.range[0]&&t<=r.range[1])return r;return ct[0]},getAchievements:()=>{const t=s(),r=[];return t.score===t.quizData.length&&r.push({icon:"🎯",text:"Perfect Detective!"}),t.maxStreak>=5&&r.push({icon:"🔥",text:"Hot Streak!"}),t.score>=Math.ceil(t.quizData.length*.8)&&r.push({icon:"🏆",text:"Expert Level"}),t.maxStreak>=3&&r.push({icon:"💪",text:"Consistent Detective"}),r},trackEvent:(t,r)=>{}})),ut=()=>{const{startQuiz:e,quizData:s}=G();return l.jsx(_.section,{className:"section active",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:l.jsxs("div",{className:"container",children:[l.jsx(Ue,{}),l.jsxs("div",{className:"hero-content",children:[l.jsx(_.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},children:"The Cartridge Detective Challenge"}),l.jsx(_.p,{className:"subtitle",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},children:"Test your ammunition knowledge with 15 challenging identification challenges. From historical conflicts to modern ballistics - can you crack the code?"}),l.jsxs(_.div,{className:"quiz-details",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.6},children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-number",children:s.length||15}),l.jsx("span",{className:"detail-label",children:"Rounds"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-number",children:"5-7"}),l.jsx("span",{className:"detail-label",children:"Minutes"})]})]}),l.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:l.jsx(fe,{onClick:e,children:"Start Detective Challenge"})}),l.jsx(_.p,{className:"disclaimer",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.6},children:"Get your personalized Cartridge Knowledge Profile and percentile ranking delivered via email."})]})]})})},Rs=({question:e})=>{const{selectedAnswer:s,selectAnswer:t}=G();return l.jsx("div",{className:"answers-container",children:e.answers.map((r,a)=>l.jsx("div",{className:_e("answer-option",s===a&&"selected"),onClick:()=>t(a),children:r},a))})},Is=({question:e})=>{const{selectedAnswer:s,selectAnswer:t}=G();return l.jsxs("div",{className:"answers-container",children:[l.jsx("div",{className:_e("answer-option",s===!0&&"selected"),onClick:()=>t(!0),children:"True"}),l.jsx("div",{className:_e("answer-option",s===!1&&"selected"),onClick:()=>t(!1),children:"False"})]})},Ms=({question:e})=>{const{selectAnswer:s}=G(),[t,r]=O.useState("");return O.useEffect(()=>{s(t.trim()!==""?t:null)},[t,s]),l.jsx("div",{className:"text-input-container",children:l.jsx("input",{type:"text",className:"text-input",placeholder:"Enter the cartridge name...",value:t,onChange:a=>r(a.target.value),autoFocus:!0})})},Os=({question:e})=>{const{selectAnswer:s}=G(),t=Math.round((e.min+e.max)/2),[r,a]=O.useState(t);O.useEffect(()=>{s(r)},[r,s]);const u=(()=>{const d=e.max-e.min;let b;e.unit==="fps"?b=200:e.unit==="grains"?b=20:d>1e3?b=200:d>100?b=25:b=10;const w=[e.min];for(let p=e.min+b;p<e.max;p+=b){const x=Math.round(p/b)*b;x>e.min&&x<e.max&&!w.includes(x)&&w.push(x)}return w.push(e.max),w.sort((p,x)=>p-x)})();return l.jsxs("div",{className:"slider-container",children:[l.jsxs("div",{className:"slider-label",children:["Range: ",e.min," - ",e.max," ",e.unit]}),l.jsx("input",{type:"range",className:"slider",min:e.min,max:e.max,step:e.step||10,value:r,onChange:d=>a(parseInt(d.target.value))}),l.jsxs("div",{className:"slider-value",children:[r," ",e.unit]}),l.jsx("div",{className:"slider-presets",children:u.map(d=>l.jsx("button",{type:"button",className:"slider-preset-btn",onClick:()=>a(d),children:d},d))})]})},qs=({question:e})=>{const{currentQuestion:s,quizData:t}=G();O.useEffect(()=>{const a=t[s+1];if(a!=null&&a.image){const n=new Image;n.src=a.image}},[s,t]);const r=()=>{switch(e.type){case"multiple-choice":case"image-multiple-choice":return l.jsx(Rs,{question:e});case"true-false":return l.jsx(Is,{question:e});case"text-input":return l.jsx(Ms,{question:e});case"slider":return l.jsx(Os,{question:e});default:return l.jsx("div",{children:"Unsupported question type"})}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"question-container",children:[e.question&&l.jsx("h2",{className:"question-text",children:e.question}),e.image&&l.jsx("div",{className:"question-image",children:l.jsx("img",{src:e.image,alt:"Cartridge identification",loading:"lazy",decoding:"async"})})]}),r()]})},Ls=()=>{const{currentQuestion:e,quizData:s,selectedAnswer:t,nextQuestion:r,resetQuestionState:a}=G(),[n,u]=O.useState(!1),[d,b]=O.useState(!1),w=s[e],p=t===null||t==="",x=async()=>{p||(u(!0),b(!0),setTimeout(()=>{r(),b(!1),u(!1)},600))};return O.useEffect(()=>{a()},[e,a]),O.useEffect(()=>{const g=F=>{if(F.key>="1"&&F.key<="4"&&(w==null?void 0:w.type)==="multiple-choice"){const T=parseInt(F.key)-1;T<w.answers.length&&G.getState().selectAnswer(T)}F.key==="Enter"&&!p&&x()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[w,p,r]),w?l.jsx(_.section,{className:"section active",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.4},style:{position:"relative",overflow:"hidden"},children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"quiz-header",children:[l.jsxs("div",{className:"quiz-header-top",children:[l.jsxs("div",{className:"question-counter",children:[l.jsxs("span",{className:"question-counter-full",children:["Question ",e+1," of ",s.length]}),l.jsxs("span",{className:"question-counter-mobile",children:["Question ",e+1]})]}),l.jsx("div",{className:"header-center",children:l.jsx(Se,{mode:"wait",children:w.title&&l.jsx(_.div,{className:"title-bullet-header",initial:{x:-200,opacity:0},animate:{x:0,opacity:1},exit:{x:200,opacity:0},transition:{duration:.4,ease:"easeOut",delay:n?0:.1},children:l.jsx("h2",{className:"question-title-header",children:w.title})},`title-${e}`)})}),w.category&&l.jsx("div",{className:"question-category question-category-desktop",children:w.category})]}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"progress-bar",style:{"--progress":`${(e+1)/s.length*100}%`}})})]}),l.jsx(Se,{children:d&&l.jsxs(l.Fragment,{children:[l.jsx(_.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:.2,ease:"easeOut"},style:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",width:"50px",height:"50px",background:"radial-gradient(circle, #ff6b00 0%, #ff4400 50%, transparent 70%)",borderRadius:"50%",zIndex:999}}),l.jsx(_.div,{initial:{x:-50,y:0,opacity:1},animate:{x:window.innerWidth+50,y:0},exit:{opacity:0},transition:{duration:.6,ease:"easeOut"},style:{position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",zIndex:1e3},children:l.jsxs("div",{style:{width:"52px",height:"16px",background:"linear-gradient(90deg, #bf9400 0%, #99161d 65%, #bf9400 100%)",borderRadius:"2px 10px 10px 2px",boxShadow:"0 0 12px rgba(191, 148, 0, 0.6), inset 0 1px 3px rgba(255,255,255,0.2)",position:"relative"},children:[l.jsx("div",{style:{position:"absolute",right:"-8px",top:"50%",transform:"translateY(-50%)",width:"0",height:"0",borderLeft:"12px solid #bf9400",borderTop:"8px solid transparent",borderBottom:"8px solid transparent",filter:"drop-shadow(0 0 3px rgba(191, 148, 0, 0.4))"}}),l.jsx(_.div,{animate:{opacity:[.7,.3,.7],scaleX:[.8,1,.8]},transition:{duration:.15,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"3px",background:"linear-gradient(90deg, transparent 0%, rgba(191, 148, 0, 0.6) 100%)",borderRadius:"2px"}})]})})]})}),l.jsxs("div",{className:"quiz-content",children:[l.jsx(Se,{mode:"wait",children:l.jsx(_.div,{initial:{opacity:0,x:n?100:0,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-100,scale:.9},transition:{duration:.5,ease:"easeInOut"},children:l.jsx(qs,{question:w})},e)}),l.jsx("div",{className:"quiz-navigation",children:l.jsx(fe,{onClick:x,disabled:p||n,children:n?"Firing...":e===s.length-1?"Complete Challenge":"Next Cartridge"})})]})]})}):l.jsx("div",{children:"Loading..."})};var ve=e=>e.type==="checkbox",le=e=>e instanceof Date,z=e=>e==null;const Nt=e=>typeof e=="object";var D=e=>!z(e)&&!Array.isArray(e)&&Nt(e)&&!le(e),zs=e=>D(e)&&e.target?ve(e.target)?e.target.checked:e.target.value:e,Bs=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Us=(e,s)=>e.has(Bs(s)),Ws=e=>{const s=e.constructor&&e.constructor.prototype;return D(s)&&s.hasOwnProperty("isPrototypeOf")},We=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){let s;const t=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(We&&(e instanceof Blob||r))&&(t||D(e)))if(s=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!Ws(e))s=e;else for(const a in e)e.hasOwnProperty(a)&&(s[a]=M(e[a]));else return e;return s}var Ve=e=>/^\w*$/.test(e),R=e=>e===void 0,Qe=e=>Array.isArray(e)?e.filter(Boolean):[],$e=e=>Qe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!D(e))return t;const r=(Ve(s)?[s]:$e(s)).reduce((a,n)=>z(a)?a:a[n],e);return R(r)||r===e?R(e[s])?t:e[s]:r},X=e=>typeof e=="boolean",C=(e,s,t)=>{let r=-1;const a=Ve(s)?[s]:$e(s),n=a.length,u=n-1;for(;++r<n;){const d=a[r];let b=t;if(r!==u){const w=e[d];b=D(w)||Array.isArray(w)?w:isNaN(+a[r+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=b,e=e[d]}};const dt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},te={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Qs=L.createContext(null);Qs.displayName="HookFormContext";var $s=(e,s,t,r=!0)=>{const a={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(a,n,{get:()=>{const u=n;return s._proxyFormState[u]!==$.all&&(s._proxyFormState[u]=!r||$.all),t&&(t[u]=!0),e[u]}});return a};const Hs=typeof window<"u"?L.useLayoutEffect:L.useEffect;var Z=e=>typeof e=="string",Gs=(e,s,t,r,a)=>Z(e)?(r&&s.watch.add(e),y(t,e,a)):Array.isArray(e)?e.map(n=>(r&&s.watch.add(n),y(t,n))):(r&&(s.watchAll=!0),t),Be=e=>z(e)||!Nt(e);function ae(e,s,t=new WeakSet){if(Be(e)||Be(s))return e===s;if(le(e)&&le(s))return e.getTime()===s.getTime();const r=Object.keys(e),a=Object.keys(s);if(r.length!==a.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const n of r){const u=e[n];if(!a.includes(n))return!1;if(n!=="ref"){const d=s[n];if(le(u)&&le(d)||D(u)&&D(d)||Array.isArray(u)&&Array.isArray(d)?!ae(u,d,t):u!==d)return!1}}return!0}var Ys=(e,s,t,r,a)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[r]:a||!0}}:{},pe=e=>Array.isArray(e)?e:[e],ft=()=>{let e=[];return{get observers(){return e},next:a=>{for(const n of e)n.next&&n.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(n=>n!==a)}}),unsubscribe:()=>{e=[]}}},U=e=>D(e)&&!Object.keys(e).length,He=e=>e.type==="file",H=e=>typeof e=="function",Ee=e=>{if(!We)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Vt=e=>e.type==="select-multiple",Ge=e=>e.type==="radio",Ks=e=>Ge(e)||ve(e),Le=e=>Ee(e)&&e.isConnected;function Js(e,s){const t=s.slice(0,-1).length;let r=0;for(;r<t;)e=R(e)?r++:e[s[r++]];return e}function Xs(e){for(const s in e)if(e.hasOwnProperty(s)&&!R(e[s]))return!1;return!0}function P(e,s){const t=Array.isArray(s)?s:Ve(s)?[s]:$e(s),r=t.length===1?e:Js(e,t),a=t.length-1,n=t[a];return r&&delete r[n],a!==0&&(D(r)&&U(r)||Array.isArray(r)&&Xs(r))&&P(e,t.slice(0,-1)),e}var Dt=e=>{for(const s in e)if(H(e[s]))return!0;return!1};function ke(e,s={}){const t=Array.isArray(e);if(D(e)||t)for(const r in e)Array.isArray(e[r])||D(e[r])&&!Dt(e[r])?(s[r]=Array.isArray(e[r])?[]:{},ke(e[r],s[r])):z(e[r])||(s[r]=!0);return s}function Tt(e,s,t){const r=Array.isArray(e);if(D(e)||r)for(const a in e)Array.isArray(e[a])||D(e[a])&&!Dt(e[a])?R(s)||Be(t[a])?t[a]=Array.isArray(e[a])?ke(e[a],[]):{...ke(e[a])}:Tt(e[a],z(s)?{}:s[a],t[a]):t[a]=!ae(e[a],s[a]);return t}var ye=(e,s)=>Tt(e,s,ke(s));const mt={value:!1,isValid:!1},ht={value:!0,isValid:!0};var Pt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!R(e[0].attributes.value)?R(e[0].value)||e[0].value===""?ht:{value:e[0].value,isValid:!0}:ht:mt}return mt},Rt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:r})=>R(e)?e:s?e===""?NaN:e&&+e:t&&Z(e)?new Date(e):r?r(e):e;const yt={isValid:!1,value:null};var It=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,yt):yt;function gt(e){const s=e.ref;return He(s)?s.files:Ge(s)?It(e.refs).value:Vt(s)?[...s.selectedOptions].map(({value:t})=>t):ve(s)?Pt(e.refs).value:Rt(R(s.value)?e.ref.value:s.value,e)}var Zs=(e,s,t,r)=>{const a={};for(const n of e){const u=y(s,n);u&&C(a,n,u._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:r}},Ce=e=>e instanceof RegExp,ge=e=>R(e)?e:Ce(e)?e.source:D(e)?Ce(e.value)?e.value.source:e.value:e,pt=e=>({isOnSubmit:!e||e===$.onSubmit,isOnBlur:e===$.onBlur,isOnChange:e===$.onChange,isOnAll:e===$.all,isOnTouch:e===$.onTouched});const xt="AsyncFunction";var er=e=>!!e&&!!e.validate&&!!(H(e.validate)&&e.validate.constructor.name===xt||D(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===xt)),tr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),vt=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const xe=(e,s,t,r)=>{for(const a of t||Object.keys(e)){const n=y(e,a);if(n){const{_f:u,...d}=n;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],a)&&!r)return!0;if(u.ref&&s(u.ref,u.name)&&!r)return!0;if(xe(d,s))break}else if(D(d)&&xe(d,s))break}}};function bt(e,s,t){const r=y(e,t);if(r||Ve(t))return{error:r,name:t};const a=t.split(".");for(;a.length;){const n=a.join("."),u=y(s,n),d=y(e,n);if(u&&!Array.isArray(u)&&t!==n)return{name:t};if(d&&d.type)return{name:n,error:d};if(d&&d.root&&d.root.type)return{name:`${n}.root`,error:d.root};a.pop()}return{name:t}}var sr=(e,s,t,r)=>{t(e);const{name:a,...n}=e;return U(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(u=>s[u]===(!r||$.all))},rr=(e,s,t)=>!e||!s||e===s||pe(e).some(r=>r&&(t?r===s:r.startsWith(s)||s.startsWith(r))),ir=(e,s,t,r,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(s||e):(t?r.isOnBlur:a.isOnBlur)?!e:(t?r.isOnChange:a.isOnChange)?e:!0,ar=(e,s)=>!Qe(y(e,s)).length&&P(e,s),nr=(e,s,t)=>{const r=pe(y(e,t));return C(r,"root",s[t]),C(e,t,r),e},je=e=>Z(e);function wt(e,s,t="validate"){if(je(e)||Array.isArray(e)&&e.every(je)||X(e)&&!e)return{type:t,message:je(e)?e:"",ref:s}}var de=e=>D(e)&&!Ce(e)?e:{value:e,message:""},At=async(e,s,t,r,a,n)=>{const{ref:u,refs:d,required:b,maxLength:w,minLength:p,min:x,max:g,pattern:F,validate:T,name:N,valueAsNumber:se,mount:De}=e._f,S=y(t,N);if(!De||s.has(N))return{};const ee=d?d[0]:u,Y=A=>{a&&ee.reportValidity&&(ee.setCustomValidity(X(A)?"":A||""),ee.reportValidity())},I={},be=Ge(u),re=ve(u),Te=be||re,Q=(se||He(u))&&R(u.value)&&R(S)||Ee(u)&&u.value===""||S===""||Array.isArray(S)&&!S.length,ne=Ys.bind(null,N,r,I),K=(A,E,V,q=te.maxLength,B=te.minLength)=>{const J=A?E:V;I[N]={type:A?q:B,message:J,ref:u,...ne(A?q:B,J)}};if(n?!Array.isArray(S)||!S.length:b&&(!Te&&(Q||z(S))||X(S)&&!S||re&&!Pt(d).isValid||be&&!It(d).isValid)){const{value:A,message:E}=je(b)?{value:!!b,message:b}:de(b);if(A&&(I[N]={type:te.required,message:E,ref:ee,...ne(te.required,E)},!r))return Y(E),I}if(!Q&&(!z(x)||!z(g))){let A,E;const V=de(g),q=de(x);if(!z(S)&&!isNaN(S)){const B=u.valueAsNumber||S&&+S;z(V.value)||(A=B>V.value),z(q.value)||(E=B<q.value)}else{const B=u.valueAsDate||new Date(S),J=we=>new Date(new Date().toDateString()+" "+we),he=u.type=="time",ce=u.type=="week";Z(V.value)&&S&&(A=he?J(S)>J(V.value):ce?S>V.value:B>new Date(V.value)),Z(q.value)&&S&&(E=he?J(S)<J(q.value):ce?S<q.value:B<new Date(q.value))}if((A||E)&&(K(!!A,V.message,q.message,te.max,te.min),!r))return Y(I[N].message),I}if((w||p)&&!Q&&(Z(S)||n&&Array.isArray(S))){const A=de(w),E=de(p),V=!z(A.value)&&S.length>+A.value,q=!z(E.value)&&S.length<+E.value;if((V||q)&&(K(V,A.message,E.message),!r))return Y(I[N].message),I}if(F&&!Q&&Z(S)){const{value:A,message:E}=de(F);if(Ce(A)&&!S.match(A)&&(I[N]={type:te.pattern,message:E,ref:u,...ne(te.pattern,E)},!r))return Y(E),I}if(T){if(H(T)){const A=await T(S,t),E=wt(A,ee);if(E&&(I[N]={...E,...ne(te.validate,E.message)},!r))return Y(E.message),I}else if(D(T)){let A={};for(const E in T){if(!U(A)&&!r)break;const V=wt(await T[E](S,t),ee,E);V&&(A={...V,...ne(E,V.message)},Y(V.message),r&&(I[N]=A))}if(!U(A)&&(I[N]={ref:ee,...A},!r))return I}}return Y(!0),I};const or={mode:$.onSubmit,reValidateMode:$.onChange,shouldFocusError:!0};function lr(e={}){let s={...or,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:H(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},a=D(s.defaultValues)||D(s.values)?M(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:M(a),u={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,w=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...p};const g={array:ft(),state:ft()},F=s.criteriaMode===$.all,T=i=>o=>{clearTimeout(w),w=setTimeout(i,o)},N=async i=>{if(!s.disabled&&(p.isValid||x.isValid||i)){const o=s.resolver?U((await re()).errors):await Q(r,!0);o!==t.isValid&&g.state.next({isValid:o})}},se=(i,o)=>{!s.disabled&&(p.isValidating||p.validatingFields||x.isValidating||x.validatingFields)&&((i||Array.from(d.mount)).forEach(c=>{c&&(o?C(t.validatingFields,c,o):P(t.validatingFields,c))}),g.state.next({validatingFields:t.validatingFields,isValidating:!U(t.validatingFields)}))},De=(i,o=[],c,h,m=!0,f=!0)=>{if(h&&c&&!s.disabled){if(u.action=!0,f&&Array.isArray(y(r,i))){const v=c(y(r,i),h.argA,h.argB);m&&C(r,i,v)}if(f&&Array.isArray(y(t.errors,i))){const v=c(y(t.errors,i),h.argA,h.argB);m&&C(t.errors,i,v),ar(t.errors,i)}if((p.touchedFields||x.touchedFields)&&f&&Array.isArray(y(t.touchedFields,i))){const v=c(y(t.touchedFields,i),h.argA,h.argB);m&&C(t.touchedFields,i,v)}(p.dirtyFields||x.dirtyFields)&&(t.dirtyFields=ye(a,n)),g.state.next({name:i,isDirty:K(i,o),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else C(n,i,o)},S=(i,o)=>{C(t.errors,i,o),g.state.next({errors:t.errors})},ee=i=>{t.errors=i,g.state.next({errors:t.errors,isValid:!1})},Y=(i,o,c,h)=>{const m=y(r,i);if(m){const f=y(n,i,R(c)?y(a,i):c);R(f)||h&&h.defaultChecked||o?C(n,i,o?f:gt(m._f)):V(i,f),u.mount&&N()}},I=(i,o,c,h,m)=>{let f=!1,v=!1;const j={name:i};if(!s.disabled){if(!c||h){(p.isDirty||x.isDirty)&&(v=t.isDirty,t.isDirty=j.isDirty=K(),f=v!==j.isDirty);const k=ae(y(a,i),o);v=!!y(t.dirtyFields,i),k?P(t.dirtyFields,i):C(t.dirtyFields,i,!0),j.dirtyFields=t.dirtyFields,f=f||(p.dirtyFields||x.dirtyFields)&&v!==!k}if(c){const k=y(t.touchedFields,i);k||(C(t.touchedFields,i,c),j.touchedFields=t.touchedFields,f=f||(p.touchedFields||x.touchedFields)&&k!==c)}f&&m&&g.state.next(j)}return f?j:{}},be=(i,o,c,h)=>{const m=y(t.errors,i),f=(p.isValid||x.isValid)&&X(o)&&t.isValid!==o;if(s.delayError&&c?(b=T(()=>S(i,c)),b(s.delayError)):(clearTimeout(w),b=null,c?C(t.errors,i,c):P(t.errors,i)),(c?!ae(m,c):m)||!U(h)||f){const v={...h,...f&&X(o)?{isValid:o}:{},errors:t.errors,name:i};t={...t,...v},g.state.next(v)}},re=async i=>{se(i,!0);const o=await s.resolver(n,s.context,Zs(i||d.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return se(i),o},Te=async i=>{const{errors:o}=await re(i);if(i)for(const c of i){const h=y(o,c);h?C(t.errors,c,h):P(t.errors,c)}else t.errors=o;return o},Q=async(i,o,c={valid:!0})=>{for(const h in i){const m=i[h];if(m){const{_f:f,...v}=m;if(f){const j=d.array.has(f.name),k=m._f&&er(m._f);k&&p.validatingFields&&se([h],!0);const W=await At(m,d.disabled,n,F,s.shouldUseNativeValidation&&!o,j);if(k&&p.validatingFields&&se([h]),W[f.name]&&(c.valid=!1,o))break;!o&&(y(W,f.name)?j?nr(t.errors,W,f.name):C(t.errors,f.name,W[f.name]):P(t.errors,f.name))}!U(v)&&await Q(v,o,c)}}return c.valid},ne=()=>{for(const i of d.unMount){const o=y(r,i);o&&(o._f.refs?o._f.refs.every(c=>!Le(c)):!Le(o._f.ref))&&Pe(i)}d.unMount=new Set},K=(i,o)=>!s.disabled&&(i&&o&&C(n,i,o),!ae(we(),a)),A=(i,o,c)=>Gs(i,d,{...u.mount?n:R(o)?a:Z(i)?{[i]:o}:o},c,o),E=i=>Qe(y(u.mount?n:a,i,s.shouldUnregister?y(a,i,[]):[])),V=(i,o,c={})=>{const h=y(r,i);let m=o;if(h){const f=h._f;f&&(!f.disabled&&C(n,i,Rt(o,f)),m=Ee(f.ref)&&z(o)?"":o,Vt(f.ref)?[...f.ref.options].forEach(v=>v.selected=m.includes(v.value)):f.refs?ve(f.ref)?f.refs.forEach(v=>{(!v.defaultChecked||!v.disabled)&&(Array.isArray(m)?v.checked=!!m.find(j=>j===v.value):v.checked=m===v.value||!!m)}):f.refs.forEach(v=>v.checked=v.value===m):He(f.ref)?f.ref.value="":(f.ref.value=m,f.ref.type||g.state.next({name:i,values:M(n)})))}(c.shouldDirty||c.shouldTouch)&&I(i,m,c.shouldTouch,c.shouldDirty,!0),c.shouldValidate&&ce(i)},q=(i,o,c)=>{for(const h in o){if(!o.hasOwnProperty(h))return;const m=o[h],f=i+"."+h,v=y(r,f);(d.array.has(i)||D(m)||v&&!v._f)&&!le(m)?q(f,m,c):V(f,m,c)}},B=(i,o,c={})=>{const h=y(r,i),m=d.array.has(i),f=M(o);C(n,i,f),m?(g.array.next({name:i,values:M(n)}),(p.isDirty||p.dirtyFields||x.isDirty||x.dirtyFields)&&c.shouldDirty&&g.state.next({name:i,dirtyFields:ye(a,n),isDirty:K(i,f)})):h&&!h._f&&!z(f)?q(i,f,c):V(i,f,c),vt(i,d)&&g.state.next({...t,name:i}),g.state.next({name:u.mount?i:void 0,values:M(n)})},J=async i=>{u.mount=!0;const o=i.target;let c=o.name,h=!0;const m=y(r,c),f=k=>{h=Number.isNaN(k)||le(k)&&isNaN(k.getTime())||ae(k,y(n,c,k))},v=pt(s.mode),j=pt(s.reValidateMode);if(m){let k,W;const Ae=o.type?gt(m._f):zs(i),ie=i.type===dt.BLUR||i.type===dt.FOCUS_OUT,Wt=!tr(m._f)&&!s.resolver&&!y(t.errors,c)&&!m._f.deps||ir(ie,y(t.touchedFields,c),t.isSubmitted,j,v),Me=vt(c,d,ie);C(n,c,Ae),ie?(!o||!o.readOnly)&&(m._f.onBlur&&m._f.onBlur(i),b&&b(0)):m._f.onChange&&m._f.onChange(i);const Oe=I(c,Ae,ie),Qt=!U(Oe)||Me;if(!ie&&g.state.next({name:c,type:i.type,values:M(n)}),Wt)return(p.isValid||x.isValid)&&(s.mode==="onBlur"?ie&&N():ie||N()),Qt&&g.state.next({name:c,...Me?{}:Oe});if(!ie&&Me&&g.state.next({...t}),s.resolver){const{errors:rt}=await re([c]);if(f(Ae),h){const $t=bt(t.errors,r,c),it=bt(rt,r,$t.name||c);k=it.error,c=it.name,W=U(rt)}}else se([c],!0),k=(await At(m,d.disabled,n,F,s.shouldUseNativeValidation))[c],se([c]),f(Ae),h&&(k?W=!1:(p.isValid||x.isValid)&&(W=await Q(r,!0)));h&&(m._f.deps&&ce(m._f.deps),be(c,W,k,Oe))}},he=(i,o)=>{if(y(t.errors,o)&&i.focus)return i.focus(),1},ce=async(i,o={})=>{let c,h;const m=pe(i);if(s.resolver){const f=await Te(R(i)?i:m);c=U(f),h=i?!m.some(v=>y(f,v)):c}else i?(h=(await Promise.all(m.map(async f=>{const v=y(r,f);return await Q(v&&v._f?{[f]:v}:v)}))).every(Boolean),!(!h&&!t.isValid)&&N()):h=c=await Q(r);return g.state.next({...!Z(i)||(p.isValid||x.isValid)&&c!==t.isValid?{}:{name:i},...s.resolver||!i?{isValid:c}:{},errors:t.errors}),o.shouldFocus&&!h&&xe(r,he,i?m:d.mount),h},we=i=>{const o={...u.mount?n:a};return R(i)?o:Z(i)?y(o,i):i.map(c=>y(o,c))},Ye=(i,o)=>({invalid:!!y((o||t).errors,i),isDirty:!!y((o||t).dirtyFields,i),error:y((o||t).errors,i),isValidating:!!y(t.validatingFields,i),isTouched:!!y((o||t).touchedFields,i)}),Mt=i=>{i&&pe(i).forEach(o=>P(t.errors,o)),g.state.next({errors:i?t.errors:{}})},Ke=(i,o,c)=>{const h=(y(r,i,{_f:{}})._f||{}).ref,m=y(t.errors,i)||{},{ref:f,message:v,type:j,...k}=m;C(t.errors,i,{...k,...o,ref:h}),g.state.next({name:i,errors:t.errors,isValid:!1}),c&&c.shouldFocus&&h&&h.focus&&h.focus()},Ot=(i,o)=>H(i)?g.state.subscribe({next:c=>"values"in c&&i(A(void 0,o),c)}):A(i,o,!0),Je=i=>g.state.subscribe({next:o=>{rr(i.name,o.name,i.exact)&&sr(o,i.formState||p,Ut,i.reRenderRoot)&&i.callback({values:{...n},...t,...o,defaultValues:a})}}).unsubscribe,qt=i=>(u.mount=!0,x={...x,...i.formState},Je({...i,formState:x})),Pe=(i,o={})=>{for(const c of i?pe(i):d.mount)d.mount.delete(c),d.array.delete(c),o.keepValue||(P(r,c),P(n,c)),!o.keepError&&P(t.errors,c),!o.keepDirty&&P(t.dirtyFields,c),!o.keepTouched&&P(t.touchedFields,c),!o.keepIsValidating&&P(t.validatingFields,c),!s.shouldUnregister&&!o.keepDefaultValue&&P(a,c);g.state.next({values:M(n)}),g.state.next({...t,...o.keepDirty?{isDirty:K()}:{}}),!o.keepIsValid&&N()},Xe=({disabled:i,name:o})=>{(X(i)&&u.mount||i||d.disabled.has(o))&&(i?d.disabled.add(o):d.disabled.delete(o))},Re=(i,o={})=>{let c=y(r,i);const h=X(o.disabled)||X(s.disabled);return C(r,i,{...c||{},_f:{...c&&c._f?c._f:{ref:{name:i}},name:i,mount:!0,...o}}),d.mount.add(i),c?Xe({disabled:X(o.disabled)?o.disabled:s.disabled,name:i}):Y(i,!0,o.value),{...h?{disabled:o.disabled||s.disabled}:{},...s.progressive?{required:!!o.required,min:ge(o.min),max:ge(o.max),minLength:ge(o.minLength),maxLength:ge(o.maxLength),pattern:ge(o.pattern)}:{},name:i,onChange:J,onBlur:J,ref:m=>{if(m){Re(i,o),c=y(r,i);const f=R(m.value)&&m.querySelectorAll&&m.querySelectorAll("input,select,textarea")[0]||m,v=Ks(f),j=c._f.refs||[];if(v?j.find(k=>k===f):f===c._f.ref)return;C(r,i,{_f:{...c._f,...v?{refs:[...j.filter(Le),f,...Array.isArray(y(a,i))?[{}]:[]],ref:{type:f.type,name:i}}:{ref:f}}}),Y(i,!1,void 0,f)}else c=y(r,i,{}),c._f&&(c._f.mount=!1),(s.shouldUnregister||o.shouldUnregister)&&!(Us(d.array,i)&&u.action)&&d.unMount.add(i)}}},Ie=()=>s.shouldFocusError&&xe(r,he,d.mount),Lt=i=>{X(i)&&(g.state.next({disabled:i}),xe(r,(o,c)=>{const h=y(r,c);h&&(o.disabled=h._f.disabled||i,Array.isArray(h._f.refs)&&h._f.refs.forEach(m=>{m.disabled=h._f.disabled||i}))},0,!1))},Ze=(i,o)=>async c=>{let h;c&&(c.preventDefault&&c.preventDefault(),c.persist&&c.persist());let m=M(n);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:f,values:v}=await re();t.errors=f,m=M(v)}else await Q(r);if(d.disabled.size)for(const f of d.disabled)P(m,f);if(P(t.errors,"root"),U(t.errors)){g.state.next({errors:{}});try{await i(m,c)}catch(f){h=f}}else o&&await o({...t.errors},c),Ie(),setTimeout(Ie);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:U(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},zt=(i,o={})=>{y(r,i)&&(R(o.defaultValue)?B(i,M(y(a,i))):(B(i,o.defaultValue),C(a,i,M(o.defaultValue))),o.keepTouched||P(t.touchedFields,i),o.keepDirty||(P(t.dirtyFields,i),t.isDirty=o.defaultValue?K(i,M(y(a,i))):K()),o.keepError||(P(t.errors,i),p.isValid&&N()),g.state.next({...t}))},et=(i,o={})=>{const c=i?M(i):a,h=M(c),m=U(i),f=m?a:h;if(o.keepDefaultValues||(a=c),!o.keepValues){if(o.keepDirtyValues){const v=new Set([...d.mount,...Object.keys(ye(a,n))]);for(const j of Array.from(v))y(t.dirtyFields,j)?C(f,j,y(n,j)):B(j,y(f,j))}else{if(We&&R(i))for(const v of d.mount){const j=y(r,v);if(j&&j._f){const k=Array.isArray(j._f.refs)?j._f.refs[0]:j._f.ref;if(Ee(k)){const W=k.closest("form");if(W){W.reset();break}}}}if(o.keepFieldsRef)for(const v of d.mount)B(v,y(f,v));else r={}}n=s.shouldUnregister?o.keepDefaultValues?M(a):{}:M(f),g.array.next({values:{...f}}),g.state.next({values:{...f}})}d={mount:o.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!p.isValid||!!o.keepIsValid||!!o.keepDirtyValues,u.watch=!!s.shouldUnregister,g.state.next({submitCount:o.keepSubmitCount?t.submitCount:0,isDirty:m?!1:o.keepDirty?t.isDirty:!!(o.keepDefaultValues&&!ae(i,a)),isSubmitted:o.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:m?{}:o.keepDirtyValues?o.keepDefaultValues&&n?ye(a,n):t.dirtyFields:o.keepDefaultValues&&i?ye(a,i):o.keepDirty?t.dirtyFields:{},touchedFields:o.keepTouched?t.touchedFields:{},errors:o.keepErrors?t.errors:{},isSubmitSuccessful:o.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},tt=(i,o)=>et(H(i)?i(n):i,o),Bt=(i,o={})=>{const c=y(r,i),h=c&&c._f;if(h){const m=h.refs?h.refs[0]:h.ref;m.focus&&(m.focus(),o.shouldSelect&&H(m.select)&&m.select())}},Ut=i=>{t={...t,...i}},st={control:{register:Re,unregister:Pe,getFieldState:Ye,handleSubmit:Ze,setError:Ke,_subscribe:Je,_runSchema:re,_focusError:Ie,_getWatch:A,_getDirty:K,_setValid:N,_setFieldArray:De,_setDisabledField:Xe,_setErrors:ee,_getFieldArray:E,_reset:et,_resetDefaultValues:()=>H(s.defaultValues)&&s.defaultValues().then(i=>{tt(i,s.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:ne,_disableForm:Lt,_subjects:g,_proxyFormState:p,get _fields(){return r},get _formValues(){return n},get _state(){return u},set _state(i){u=i},get _defaultValues(){return a},get _names(){return d},set _names(i){d=i},get _formState(){return t},get _options(){return s},set _options(i){s={...s,...i}}},subscribe:qt,trigger:ce,register:Re,handleSubmit:Ze,watch:Ot,setValue:B,getValues:we,reset:tt,resetField:zt,clearErrors:Mt,unregister:Pe,setError:Ke,setFocus:Bt,getFieldState:Ye};return{...st,formControl:st}}function cr(e={}){const s=L.useRef(void 0),t=L.useRef(void 0),[r,a]=L.useState({isDirty:!1,isValidating:!1,isLoading:H(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:H(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:r},e.defaultValues&&!H(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...d}=lr(e);s.current={...d,formState:r}}const n=s.current.control;return n._options=e,Hs(()=>{const u=n._subscribe({formState:n._proxyFormState,callback:()=>a({...n._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),n._formState.isReady=!0,u},[n]),L.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),L.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),L.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),L.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),L.useEffect(()=>{if(n._proxyFormState.isDirty){const u=n._getDirty();u!==r.isDirty&&n._subjects.state.next({isDirty:u})}},[n,r.isDirty]),L.useEffect(()=>{e.values&&!ae(e.values,t.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),t.current=e.values,a(u=>({...u}))):n._resetDefaultValues()},[n,e.values]),L.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=$s(r,n),s.current}const ur=()=>{const{submitEmail:e}=G(),[s,t]=O.useState(!1),[r,a]=O.useState(!1),{register:n,handleSubmit:u,formState:{errors:d,isValid:b},setFocus:w}=cr({defaultValues:{subscribeToBulletin:!0}});O.useEffect(()=>{w("email")},[w]),O.useEffect(()=>{const x=g=>{g.key==="Enter"&&b&&u(p)()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[b,u]);const p=async x=>{a(!0),t(!0);try{await new Promise(g=>setTimeout(g,600)),a(!1),await new Promise(g=>setTimeout(g,400)),e(x.email,x.subscribeToBulletin)}catch{t(!1),a(!1)}};return l.jsx(_.section,{className:"section active",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"email-content",children:[l.jsx(Ue,{}),l.jsx(_.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:"Challenge Complete!"}),l.jsx(_.p,{className:"email-subtitle",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Get your detailed Cartridge Knowledge Profile with historical context, percentile ranking, and explanations for each cartridge."}),l.jsxs(_.form,{className:"email-form",onSubmit:u(p),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[l.jsx("input",{type:"email",placeholder:"Enter your email address",...n("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),style:d.email?{borderColor:"#dc3545"}:{}}),l.jsxs("div",{className:"submit-container",style:{position:"relative"},children:[r&&l.jsxs(l.Fragment,{children:[l.jsx(_.div,{className:"muzzle-flash",initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:[.5,1.2,.5]},transition:{duration:.3,ease:"easeOut"}}),l.jsx(_.div,{className:"bullet-trail",initial:{x:-20,opacity:1},animate:{x:200,opacity:0},transition:{duration:.4,ease:"easeOut"}})]}),l.jsx(fe,{type:"submit",disabled:!b||s,children:s?r?"FIRING! 💥":"Reloading...":"FIRE! 🎯"})]})]}),d.email&&l.jsx(_.p,{style:{color:"#dc3545",fontSize:"14px",marginTop:"10px"},initial:{opacity:0},animate:{opacity:1},children:d.email.message}),l.jsx(_.div,{className:"bulletin-option-single",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:l.jsxs("div",{className:"bullet-option",children:[l.jsx("div",{className:"bullet-shell",children:l.jsx("div",{className:"bullet-tip"})}),l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",...n("subscribeToBulletin"),defaultChecked:!0}),l.jsx("span",{children:"🎯 Get the Ammo.com BULLETin for weekly ammo discounts and insights"})]})]})})]})})})},dr=()=>{const{score:e,quizData:s,maxStreak:t,getTier:r,getAchievements:a,retakeQuiz:n}=G(),u=r(e),d=a(),b=Math.round(e/s.length*100),w=()=>{oe.socialShare("twitter",e,u.name);const x=`I just scored ${e}/${s.length} on the Cartridge Detective Challenge and earned the rank of ${u.name}! Can you beat my score?`,g=encodeURIComponent(window.location.href);window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(x)}&url=${g}`,"_blank")},p=()=>{oe.socialShare("facebook",e,u.name);const x=encodeURIComponent(window.location.href);window.open(`https://www.facebook.com/sharer/sharer.php?u=${x}`,"_blank")};return l.jsx(_.section,{className:"section active",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"results-content",children:[l.jsx(Ue,{}),l.jsxs("div",{className:"results-header",children:[l.jsx(_.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:"Your Detective Results"}),l.jsxs(_.div,{className:"score-display",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.5},children:[l.jsx("span",{className:"score-number",children:e}),l.jsx("span",{className:"score-separator",children:" / "}),l.jsx("span",{className:"score-total",children:s.length})]})]}),l.jsxs(_.div,{className:"tier-badge",style:{borderColor:e>=10?"#bf9400":e>=7?"#99161d":"#464648"},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},children:[l.jsx("div",{className:"tier-icon",children:u.icon}),l.jsx("h3",{className:"tier-title",children:u.name}),l.jsx("p",{className:"tier-description",children:u.description})]}),l.jsxs(_.div,{className:"results-breakdown",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[l.jsx("h4",{children:"Performance Summary"}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Cartridges Identified:"}),l.jsx("span",{children:e})]}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Accuracy Rate:"}),l.jsxs("span",{children:[b,"%"]})]}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Best Streak:"}),l.jsx("span",{children:t})]})]}),d.length>0&&l.jsx(_.div,{className:"achievements",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},children:d.map((x,g)=>l.jsxs("div",{className:"achievement-badge",children:[l.jsx("span",{className:"achievement-icon",children:x.icon}),l.jsx("span",{className:"achievement-text",children:x.text})]},g))}),l.jsxs(_.div,{className:"email-sent-notice",style:{background:"#1d1d1d",border:"2px solid #28a745",borderRadius:"8px",padding:"20px",margin:"30px 0",textAlign:"center"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.2},children:[l.jsx("h4",{style:{color:"#28a745",marginBottom:"10px"},children:"📧 Results Sent!"}),l.jsx("p",{style:{color:"#cccccc"},children:"Check your email for detailed explanations, historical context, and your complete Cartridge Knowledge Profile."})]}),l.jsxs(_.div,{style:{margin:"30px 0"},initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4},children:[l.jsx("h4",{style:{color:"#bf9400",marginBottom:"15px"},children:"Share Your Results"}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",flexWrap:"wrap"},children:[l.jsx(fe,{variant:"social",onClick:w,children:"Share on Twitter"}),l.jsx(fe,{variant:"social",onClick:p,children:"Share on Facebook"})]})]}),l.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.6},children:l.jsx(fe,{variant:"secondary",onClick:n,children:"Take Challenge Again"})})]})})})};function fr(){const{currentSection:e,trackEvent:s}=G();O.useEffect(()=>{s("quiz_page_loaded")},[s]);const t=()=>{switch(e){case"landing":return l.jsx(ut,{});case"quiz":return l.jsx(Ls,{});case"emailCapture":return l.jsx(ur,{});case"results":return l.jsx(dr,{});default:return l.jsx(ut,{})}};return l.jsx("div",{className:"App",children:l.jsx(Se,{mode:"wait",children:t()})})}ze.createRoot(document.getElementById("root")).render(l.jsx(L.StrictMode,{children:l.jsx(fr,{})}));
