import{r as U,a as Yt,g as Ht,R as P}from"./vendor-57209f9c.js";import{m as k,A as Ue}from"./animations-d886bd4a.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var _t={exports:{}},Ve={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=U,Gt=Symbol.for("react.element"),Xt=Symbol.for("react.fragment"),Zt=Object.prototype.hasOwnProperty,Jt=Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,er={key:!0,ref:!0,__self:!0,__source:!0};function Et(e,r,t){var s,n={},a=null,u=null;t!==void 0&&(a=""+t),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(u=r.ref);for(s in r)Zt.call(r,s)&&!er.hasOwnProperty(s)&&(n[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps,r)n[s]===void 0&&(n[s]=r[s]);return{$$typeof:Gt,type:e,key:a,ref:u,props:n,_owner:Jt.current}}Ve.Fragment=Xt;Ve.jsx=Et;Ve.jsxs=Et;_t.exports=Ve;var l=_t.exports,Qe={},nt=Yt;Qe.createRoot=nt.createRoot,Qe.hydrateRoot=nt.hydrateRoot;const Fe=({size:e="large"})=>e==="small"?l.jsx("div",{className:"logo-small",children:l.jsx("div",{className:"logo-shield-small",children:l.jsx("span",{className:"logo-text-small",children:"AMMO"})})}):l.jsx("div",{className:"logo",children:l.jsx("div",{className:"logo-shield",children:l.jsx("span",{className:"logo-text",children:"AMMO"})})});function At(e){var r,t,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(r=0;r<n;r++)e[r]&&(t=At(e[r]))&&(s&&(s+=" "),s+=t)}else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function Ee(){for(var e,r,t=0,s="",n=arguments.length;t<n;t++)(e=arguments[t])&&(r=At(e))&&(s&&(s+=" "),s+=r);return s}const fe=({variant:e="primary",children:r,className:t,...s})=>l.jsx("button",{className:Ee("btn",{"btn-primary":e==="primary","btn-secondary":e==="secondary","btn-social":e==="social"},t),...s,children:r}),at=e=>{let r;const t=new Set,s=(g,x)=>{const v=typeof g=="function"?g(r):g;if(!Object.is(v,r)){const F=r;r=x??(typeof v!="object"||v===null)?v:Object.assign({},r,v),t.forEach(R=>R(r,F))}},n=()=>r,b={setState:s,getState:n,getInitialState:()=>w,subscribe:g=>(t.add(g),()=>t.delete(g)),destroy:()=>{t.clear()}},w=r=e(s,n,b);return b},tr=e=>e?at(e):at;var jt={exports:{}},kt={},Vt={exports:{}},Ft={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=U;function rr(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var sr=typeof Object.is=="function"?Object.is:rr,ir=ye.useState,nr=ye.useEffect,ar=ye.useLayoutEffect,or=ye.useDebugValue;function lr(e,r){var t=r(),s=ir({inst:{value:t,getSnapshot:r}}),n=s[0].inst,a=s[1];return ar(function(){n.value=t,n.getSnapshot=r,Pe(n)&&a({inst:n})},[e,t,r]),nr(function(){return Pe(n)&&a({inst:n}),e(function(){Pe(n)&&a({inst:n})})},[e]),or(t),t}function Pe(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!sr(e,t)}catch{return!0}}function cr(e,r){return r()}var ur=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cr:lr;Ft.useSyncExternalStore=ye.useSyncExternalStore!==void 0?ye.useSyncExternalStore:ur;Vt.exports=Ft;var dr=Vt.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De=U,fr=dr;function yr(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var hr=typeof Object.is=="function"?Object.is:yr,mr=fr.useSyncExternalStore,gr=De.useRef,pr=De.useEffect,vr=De.useMemo,xr=De.useDebugValue;kt.useSyncExternalStoreWithSelector=function(e,r,t,s,n){var a=gr(null);if(a.current===null){var u={hasValue:!1,value:null};a.current=u}else u=a.current;a=vr(function(){function b(F){if(!w){if(w=!0,g=F,F=s(F),n!==void 0&&u.hasValue){var R=u.value;if(n(R,F))return x=R}return x=F}if(R=x,hr(g,F))return R;var D=s(F);return n!==void 0&&n(R,D)?(g=F,R):(g=F,x=D)}var w=!1,g,x,v=t===void 0?null:t;return[function(){return b(r())},v===null?void 0:function(){return b(v())}]},[r,t,s,n]);var d=mr(e,a[0],a[1]);return pr(function(){u.hasValue=!0,u.value=d},[d]),xr(d),d};jt.exports=kt;var br=jt.exports;const wr=Ht(br),{useDebugValue:Sr}=P,{useSyncExternalStoreWithSelector:_r}=wr;const Er=e=>e;function Ar(e,r=Er,t){const s=_r(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,t);return Sr(s),s}const ot=e=>{const r=typeof e=="function"?tr(e):e,t=(s,n)=>Ar(r,s,n);return Object.assign(t,r),t},jr=e=>e?ot(e):ot,kr=async(e,r,t)=>{const s={}.VITE_MAILCHIMP_API_KEY,n={}.VITE_MAILCHIMP_SERVER_PREFIX,a={}.VITE_MAILCHIMP_LIST_ID;if(!s||!n||!a)return console.warn("MailChimp environment variables not configured"),console.log("Would subscribe:",{email:e,subscribeToBulletin:r,quizData:t}),!0;try{const u=`https://${n}.api.mailchimp.com/3.0/lists/${a}/members`,d={email_address:e,status:r?"subscribed":"unsubscribed",tags:["cartridge-quiz"],merge_fields:{QUIZ_SCORE:t==null?void 0:t.score,QUIZ_TIER:t==null?void 0:t.tier,QUIZ_DATE:new Date().toISOString().split("T")[0]}},b=await fetch(u,{method:"POST",headers:{Authorization:`Basic ${btoa(`anystring:${s}`)}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(b.ok)return console.log("Successfully subscribed to MailChimp"),!0;{const w=await b.json();return console.error("MailChimp subscription failed:",w),!1}}catch(u){return console.error("MailChimp API error:",u),!1}},Vr=async(e,r)=>(console.log("Sending quiz results email to:",e,r),new Promise(t=>{setTimeout(()=>{console.log("Quiz results email sent successfully"),t(!0)},1e3)})),Fr=e=>{const r=document.createElement("script");r.async=!0,r.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(r),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",e)},ue=(e,r)=>{typeof window.gtag<"u"?window.gtag("event",e,r):console.log("Analytics Event:",e,r)},oe={quizStarted:()=>ue("quiz_started",{content_type:"quiz",content_id:"cartridge_detective_challenge"}),questionAnswered:(e,r,t)=>ue("question_answered",{question_index:e,is_correct:r,question_category:t}),quizCompleted:e=>ue("quiz_completed",{score:e.score,total_questions:e.totalQuestions,accuracy:e.accuracy,tier:e.tier,newsletter_signup:e.subscribeToBulletin,conversion:!0}),emailSubmitted:e=>ue("email_submitted",{newsletter_signup:e,lead_generated:!0}),socialShare:(e,r,t)=>ue("social_share",{platform:e,score:r,tier:t}),retakeQuiz:()=>ue("quiz_retake")},lt={}.VITE_GA4_MEASUREMENT_ID;lt&&Fr(lt);const ct=[{name:"Recruit Detective",range:[0,3],icon:"🎯",description:"You're new to cartridge identification. Every expert started here - keep learning!"},{name:"Cartridge Spotter",range:[4,6],icon:"🏅",description:"You can identify some common cartridges. Your detective skills are developing!"},{name:"Ammunition Expert",range:[7,9],icon:"⭐",description:"Impressive knowledge! You can identify most cartridges and understand their history."},{name:"Master Cartridge Detective",range:[10,12],icon:"🎖️",description:"Exceptional expertise! You have deep cartridge knowledge that rivals collectors."},{name:"Arsenal Commander",range:[13,15],icon:"👑",description:"Elite cartridge authority! Your knowledge is comprehensive and you're among the top detectives."}],J=jr((e,r)=>({currentQuestion:0,score:0,selectedAnswer:null,userAnswers:[],streak:0,maxStreak:0,quizData:[],isQuizActive:!1,currentSection:"landing",startQuiz:async()=>{oe.quizStarted(),await r().loadQuestions(),e({currentSection:"quiz",isQuizActive:!0,userAnswers:[]})},loadQuestions:async()=>{try{const s=await(await fetch("/src/data/cartridge-questions.json")).json();r().generateQuiz(s)}catch(t){console.error("Error loading questions:",t),r().generateQuiz({easy:[],medium:[],hard:[],settings:{questionsPerDifficulty:{easy:5,medium:6,hard:4}}})}},generateQuiz:t=>{const s=t.settings,n=[];["easy","medium","hard"].forEach(a=>{const u=s.questionsPerDifficulty[a],d=[...t[a]];for(let b=0;b<u&&d.length>0;b++){const w=Math.floor(Math.random()*d.length),g=d.splice(w,1)[0];n.push({...g,id:`${a}-${b}`,difficulty:a})}}),e({quizData:n})},selectAnswer:t=>{e({selectedAnswer:t})},nextQuestion:()=>{const t=r(),s=t.quizData[t.currentQuestion];let n=!1,a=t.selectedAnswer;switch(s.type){case"multiple-choice":case"image-multiple-choice":n=t.selectedAnswer===s.correct,a=s.answers[t.selectedAnswer];break;case"true-false":n=t.selectedAnswer===s.correct;break;case"text-input":n=s.acceptableAnswers.some(x=>x.toLowerCase()===String(t.selectedAnswer).toLowerCase());break;case"slider":n=Math.abs(t.selectedAnswer-s.correct)<=s.tolerance,a=`${t.selectedAnswer} ${s.unit}`;break;case"drag-drop":n=Object.keys(s.correctMatches).every(x=>t.selectedAnswer[x]===s.correctMatches[x]);break}const u={question:s,userAnswer:a,isCorrect:n,questionIndex:t.currentQuestion},d=[...t.userAnswers,u],b=n?t.score+1:t.score,w=n?t.streak+1:0,g=Math.max(t.maxStreak,w);e({userAnswers:d,score:b,streak:w,maxStreak:g}),oe.questionAnswered(t.currentQuestion,n,s.category),t.currentQuestion+1<t.quizData.length?(e({currentQuestion:t.currentQuestion+1}),r().resetQuestionState()):e({currentSection:"emailCapture",isQuizActive:!1})},submitEmail:async(t,s)=>{const n=r(),a=r().getTier(n.score),u=Math.round(n.score/n.quizData.length*100);oe.emailSubmitted(s),oe.quizCompleted({score:n.score,totalQuestions:n.quizData.length,accuracy:u,tier:a.name,subscribeToBulletin:s});try{await kr(t,s,{score:n.score,tier:a.name,accuracy:u}),await Vr(t,{score:n.score,totalQuestions:n.quizData.length,tier:a,userAnswers:n.userAnswers,accuracy:u})}catch(d){console.error("Email/subscription error:",d)}e({currentSection:"results"})},showSection:t=>{e({currentSection:t})},retakeQuiz:()=>{oe.retakeQuiz(),e({currentQuestion:0,score:0,selectedAnswer:null,streak:0,maxStreak:0,userAnswers:[],currentSection:"landing",isQuizActive:!1}),r().resetQuestionState()},resetQuestionState:()=>{e({selectedAnswer:null})},getTier:t=>{for(const s of ct)if(t>=s.range[0]&&t<=s.range[1])return s;return ct[0]},getAchievements:()=>{const t=r(),s=[];return t.score===t.quizData.length&&s.push({icon:"🎯",text:"Perfect Detective!"}),t.maxStreak>=5&&s.push({icon:"🔥",text:"Hot Streak!"}),t.score>=Math.ceil(t.quizData.length*.8)&&s.push({icon:"🏆",text:"Expert Level"}),t.maxStreak>=3&&s.push({icon:"💪",text:"Consistent Detective"}),s},trackEvent:(t,s)=>{console.log("Legacy Analytics Event:",t,s)}})),ut=()=>{const{startQuiz:e,quizData:r}=J();return l.jsx(k.section,{className:"section active",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:l.jsxs("div",{className:"container",children:[l.jsx(Fe,{}),l.jsxs("div",{className:"hero-content",children:[l.jsx(k.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},children:"The Cartridge Detective Challenge"}),l.jsx(k.p,{className:"subtitle",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},children:"Can you identify these obscure military and sporting cartridges? Test your expertise with our challenging cartridge identification quiz."}),l.jsxs(k.div,{className:"quiz-details",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.6},children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-number",children:r.length||15}),l.jsx("span",{className:"detail-label",children:"Cartridges"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-number",children:"5-7"}),l.jsx("span",{className:"detail-label",children:"Minutes"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-number",children:"5"}),l.jsx("span",{className:"detail-label",children:"Skill Levels"})]})]}),l.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:l.jsx(fe,{onClick:e,children:"Start Detective Challenge"})}),l.jsx(k.p,{className:"disclaimer",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.6},children:"Get your personalized Cartridge Knowledge Profile and percentile ranking delivered via email."})]})]})})},Dr=({current:e,total:r,category:t})=>{const s=(e+1)/r*100;return l.jsxs("div",{className:"progress-container",children:[l.jsx("div",{className:"progress-bar",style:{"--progress":`${s}%`}}),l.jsxs("span",{className:"progress-text",children:["Question ",e+1," of ",r,t&&` • ${t}`]})]})},Nr=({question:e})=>{const{selectedAnswer:r,selectAnswer:t}=J();return l.jsx("div",{className:"answers-container",children:e.answers.map((s,n)=>l.jsx("div",{className:Ee("answer-option",r===n&&"selected"),onClick:()=>t(n),children:s},n))})},Cr=({question:e})=>{const{selectedAnswer:r,selectAnswer:t}=J();return l.jsxs("div",{className:"answers-container",children:[l.jsx("div",{className:Ee("answer-option",r===!0&&"selected"),onClick:()=>t(!0),children:"True"}),l.jsx("div",{className:Ee("answer-option",r===!1&&"selected"),onClick:()=>t(!1),children:"False"})]})},Rr=({question:e})=>{const{selectAnswer:r}=J(),[t,s]=U.useState("");return U.useEffect(()=>{r(t.trim()!==""?t:null)},[t,r]),l.jsx("div",{className:"text-input-container",children:l.jsx("input",{type:"text",className:"text-input",placeholder:"Enter the cartridge name...",value:t,onChange:n=>s(n.target.value),autoFocus:!0})})},Ir=({question:e})=>{const{selectAnswer:r}=J(),t=Math.round((e.min+e.max)/2),[s,n]=U.useState(t);U.useEffect(()=>{r(s)},[s,r]);const u=(()=>{const d=e.max-e.min;let b;e.unit==="fps"?b=200:e.unit==="grains"?b=20:d>1e3?b=200:d>100?b=25:b=10;const w=[e.min];for(let g=e.min+b;g<e.max;g+=b){const x=Math.round(g/b)*b;x>e.min&&x<e.max&&!w.includes(x)&&w.push(x)}return w.push(e.max),w.sort((g,x)=>g-x)})();return l.jsxs("div",{className:"slider-container",children:[l.jsxs("div",{className:"slider-label",children:["Range: ",e.min," - ",e.max," ",e.unit]}),l.jsx("input",{type:"range",className:"slider",min:e.min,max:e.max,step:e.step||10,value:s,onChange:d=>n(parseInt(d.target.value))}),l.jsxs("div",{className:"slider-value",children:[s," ",e.unit]}),l.jsx("div",{className:"slider-presets",children:u.map(d=>l.jsx("button",{type:"button",className:"slider-preset-btn",onClick:()=>n(d),children:d},d))})]})},Or=({question:e})=>{const r=()=>{switch(e.type){case"multiple-choice":case"image-multiple-choice":return l.jsx(Nr,{question:e});case"true-false":return l.jsx(Cr,{question:e});case"text-input":return l.jsx(Rr,{question:e});case"slider":return l.jsx(Ir,{question:e});default:return l.jsx("div",{children:"Unsupported question type"})}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"question-container",children:[l.jsx("h2",{className:"question-title",children:e.question}),e.image&&l.jsx("div",{className:"question-image",children:l.jsx("img",{src:e.image,alt:"Cartridge identification"})})]}),r()]})},Tr=()=>{const{currentQuestion:e,quizData:r,selectedAnswer:t,nextQuestion:s,resetQuestionState:n}=J(),[a,u]=U.useState(!1),[d,b]=U.useState(!1),w=r[e],g=t===null||t==="",x=async()=>{g||(u(!0),b(!0),setTimeout(()=>{s(),b(!1),u(!1)},600))};return U.useEffect(()=>{n()},[e,n]),U.useEffect(()=>{const v=F=>{if(F.key>="1"&&F.key<="4"&&(w==null?void 0:w.type)==="multiple-choice"){const R=parseInt(F.key)-1;R<w.answers.length&&J.getState().selectAnswer(R)}F.key==="Enter"&&!g&&x()};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[w,g,s]),w?l.jsx(k.section,{className:"section active",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.4},style:{position:"relative",overflow:"hidden"},children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"quiz-header",children:[l.jsx(Fe,{size:"small"}),l.jsx(Dr,{current:e,total:r.length,category:w.category})]}),l.jsx(Ue,{children:d&&l.jsxs(l.Fragment,{children:[l.jsx(k.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:.2,ease:"easeOut"},style:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",width:"50px",height:"50px",background:"radial-gradient(circle, #ff6b00 0%, #ff4400 50%, transparent 70%)",borderRadius:"50%",zIndex:999}}),l.jsx(k.div,{initial:{x:-50,y:0,opacity:1},animate:{x:window.innerWidth+50,y:0},exit:{opacity:0},transition:{duration:.6,ease:"easeOut"},style:{position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",zIndex:1e3},children:l.jsxs("div",{style:{width:"52px",height:"16px",background:"linear-gradient(90deg, #bf9400 0%, #99161d 65%, #bf9400 100%)",borderRadius:"2px 10px 10px 2px",boxShadow:"0 0 12px rgba(191, 148, 0, 0.6), inset 0 1px 3px rgba(255,255,255,0.2)",position:"relative"},children:[l.jsx("div",{style:{position:"absolute",right:"-8px",top:"50%",transform:"translateY(-50%)",width:"0",height:"0",borderLeft:"12px solid #bf9400",borderTop:"8px solid transparent",borderBottom:"8px solid transparent",filter:"drop-shadow(0 0 3px rgba(191, 148, 0, 0.4))"}}),l.jsx(k.div,{animate:{opacity:[.7,.3,.7],scaleX:[.8,1,.8]},transition:{duration:.15,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"3px",background:"linear-gradient(90deg, transparent 0%, rgba(191, 148, 0, 0.6) 100%)",borderRadius:"2px"}})]})})]})}),l.jsxs("div",{className:"quiz-content",children:[l.jsx(Ue,{mode:"wait",children:l.jsx(k.div,{initial:{opacity:0,x:a?100:0,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-100,scale:.9},transition:{duration:.5,ease:"easeInOut"},children:l.jsx(Or,{question:w})},e)}),l.jsx("div",{className:"quiz-navigation",children:l.jsx(fe,{onClick:x,disabled:g||a,children:a?"Firing...":e===r.length-1?"Complete Challenge":"Next Cartridge"})})]})]})}):l.jsx("div",{children:"Loading..."})};var xe=e=>e.type==="checkbox",le=e=>e instanceof Date,z=e=>e==null;const Dt=e=>typeof e=="object";var C=e=>!z(e)&&!Array.isArray(e)&&Dt(e)&&!le(e),Lr=e=>C(e)&&e.target?xe(e.target)?e.target.checked:e.target.value:e,Mr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Pr=(e,r)=>e.has(Mr(r)),zr=e=>{const r=e.constructor&&e.constructor.prototype;return C(r)&&r.hasOwnProperty("isPrototypeOf")},qe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function L(e){let r;const t=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(!(qe&&(e instanceof Blob||s))&&(t||C(e)))if(r=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!zr(e))r=e;else for(const n in e)e.hasOwnProperty(n)&&(r[n]=L(e[n]));else return e;return r}var Ne=e=>/^\w*$/.test(e),O=e=>e===void 0,$e=e=>Array.isArray(e)?e.filter(Boolean):[],We=e=>$e(e.replace(/["|']|\]/g,"").split(/\.|\[/)),m=(e,r,t)=>{if(!r||!C(e))return t;const s=(Ne(r)?[r]:We(r)).reduce((n,a)=>z(n)?n:n[a],e);return O(s)||s===e?O(e[r])?t:e[r]:s},X=e=>typeof e=="boolean",V=(e,r,t)=>{let s=-1;const n=Ne(r)?[r]:We(r),a=n.length,u=a-1;for(;++s<a;){const d=n[s];let b=t;if(s!==u){const w=e[d];b=C(w)||Array.isArray(w)?w:isNaN(+n[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=b,e=e[d]}};const dt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},te={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ur=P.createContext(null);Ur.displayName="HookFormContext";var Qr=(e,r,t,s=!0)=>{const n={defaultValues:r._defaultValues};for(const a in e)Object.defineProperty(n,a,{get:()=>{const u=a;return r._proxyFormState[u]!==W.all&&(r._proxyFormState[u]=!s||W.all),t&&(t[u]=!0),e[u]}});return n};const Br=typeof window<"u"?P.useLayoutEffect:P.useEffect;var Z=e=>typeof e=="string",qr=(e,r,t,s,n)=>Z(e)?(s&&r.watch.add(e),m(t,e,n)):Array.isArray(e)?e.map(a=>(s&&r.watch.add(a),m(t,a))):(s&&(r.watchAll=!0),t),Be=e=>z(e)||!Dt(e);function ne(e,r,t=new WeakSet){if(Be(e)||Be(r))return e===r;if(le(e)&&le(r))return e.getTime()===r.getTime();const s=Object.keys(e),n=Object.keys(r);if(s.length!==n.length)return!1;if(t.has(e)||t.has(r))return!0;t.add(e),t.add(r);for(const a of s){const u=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const d=r[a];if(le(u)&&le(d)||C(u)&&C(d)||Array.isArray(u)&&Array.isArray(d)?!ne(u,d,t):u!==d)return!1}}return!0}var $r=(e,r,t,s,n)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:n||!0}}:{},pe=e=>Array.isArray(e)?e:[e],ft=()=>{let e=[];return{get observers(){return e},next:n=>{for(const a of e)a.next&&a.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(a=>a!==n)}}),unsubscribe:()=>{e=[]}}},B=e=>C(e)&&!Object.keys(e).length,Ye=e=>e.type==="file",Y=e=>typeof e=="function",Ae=e=>{if(!qe)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},Nt=e=>e.type==="select-multiple",He=e=>e.type==="radio",Wr=e=>He(e)||xe(e),ze=e=>Ae(e)&&e.isConnected;function Yr(e,r){const t=r.slice(0,-1).length;let s=0;for(;s<t;)e=O(e)?s++:e[r[s++]];return e}function Hr(e){for(const r in e)if(e.hasOwnProperty(r)&&!O(e[r]))return!1;return!0}function I(e,r){const t=Array.isArray(r)?r:Ne(r)?[r]:We(r),s=t.length===1?e:Yr(e,t),n=t.length-1,a=t[n];return s&&delete s[a],n!==0&&(C(s)&&B(s)||Array.isArray(s)&&Hr(s))&&I(e,t.slice(0,-1)),e}var Ct=e=>{for(const r in e)if(Y(e[r]))return!0;return!1};function je(e,r={}){const t=Array.isArray(e);if(C(e)||t)for(const s in e)Array.isArray(e[s])||C(e[s])&&!Ct(e[s])?(r[s]=Array.isArray(e[s])?[]:{},je(e[s],r[s])):z(e[s])||(r[s]=!0);return r}function Rt(e,r,t){const s=Array.isArray(e);if(C(e)||s)for(const n in e)Array.isArray(e[n])||C(e[n])&&!Ct(e[n])?O(r)||Be(t[n])?t[n]=Array.isArray(e[n])?je(e[n],[]):{...je(e[n])}:Rt(e[n],z(r)?{}:r[n],t[n]):t[n]=!ne(e[n],r[n]);return t}var me=(e,r)=>Rt(e,r,je(r));const yt={value:!1,isValid:!1},ht={value:!0,isValid:!0};var It=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!O(e[0].attributes.value)?O(e[0].value)||e[0].value===""?ht:{value:e[0].value,isValid:!0}:ht:yt}return yt},Ot=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:s})=>O(e)?e:r?e===""?NaN:e&&+e:t&&Z(e)?new Date(e):s?s(e):e;const mt={isValid:!1,value:null};var Tt=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,mt):mt;function gt(e){const r=e.ref;return Ye(r)?r.files:He(r)?Tt(e.refs).value:Nt(r)?[...r.selectedOptions].map(({value:t})=>t):xe(r)?It(e.refs).value:Ot(O(r.value)?e.ref.value:r.value,e)}var Kr=(e,r,t,s)=>{const n={};for(const a of e){const u=m(r,a);u&&V(n,a,u._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:s}},ke=e=>e instanceof RegExp,ge=e=>O(e)?e:ke(e)?e.source:C(e)?ke(e.value)?e.value.source:e.value:e,pt=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched});const vt="AsyncFunction";var Gr=e=>!!e&&!!e.validate&&!!(Y(e.validate)&&e.validate.constructor.name===vt||C(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===vt)),Xr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),xt=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const ve=(e,r,t,s)=>{for(const n of t||Object.keys(e)){const a=m(e,n);if(a){const{_f:u,...d}=a;if(u){if(u.refs&&u.refs[0]&&r(u.refs[0],n)&&!s)return!0;if(u.ref&&r(u.ref,u.name)&&!s)return!0;if(ve(d,r))break}else if(C(d)&&ve(d,r))break}}};function bt(e,r,t){const s=m(e,t);if(s||Ne(t))return{error:s,name:t};const n=t.split(".");for(;n.length;){const a=n.join("."),u=m(r,a),d=m(e,a);if(u&&!Array.isArray(u)&&t!==a)return{name:t};if(d&&d.type)return{name:a,error:d};if(d&&d.root&&d.root.type)return{name:`${a}.root`,error:d.root};n.pop()}return{name:t}}var Zr=(e,r,t,s)=>{t(e);const{name:n,...a}=e;return B(a)||Object.keys(a).length>=Object.keys(r).length||Object.keys(a).find(u=>r[u]===(!s||W.all))},Jr=(e,r,t)=>!e||!r||e===r||pe(e).some(s=>s&&(t?s===r:s.startsWith(r)||r.startsWith(s))),es=(e,r,t,s,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(r||e):(t?s.isOnBlur:n.isOnBlur)?!e:(t?s.isOnChange:n.isOnChange)?e:!0,ts=(e,r)=>!$e(m(e,r)).length&&I(e,r),rs=(e,r,t)=>{const s=pe(m(e,t));return V(s,"root",r[t]),V(e,t,s),e},_e=e=>Z(e);function wt(e,r,t="validate"){if(_e(e)||Array.isArray(e)&&e.every(_e)||X(e)&&!e)return{type:t,message:_e(e)?e:"",ref:r}}var de=e=>C(e)&&!ke(e)?e:{value:e,message:""},St=async(e,r,t,s,n,a)=>{const{ref:u,refs:d,required:b,maxLength:w,minLength:g,min:x,max:v,pattern:F,validate:R,name:D,valueAsNumber:re,mount:Ce}=e._f,_=m(t,D);if(!Ce||r.has(D))return{};const ee=d?d[0]:u,H=S=>{n&&ee.reportValidity&&(ee.setCustomValidity(X(S)?"":S||""),ee.reportValidity())},T={},be=He(u),se=xe(u),Re=be||se,$=(re||Ye(u))&&O(u.value)&&O(_)||Ae(u)&&u.value===""||_===""||Array.isArray(_)&&!_.length,ae=$r.bind(null,D,s,T),K=(S,A,N,M=te.maxLength,Q=te.minLength)=>{const G=S?A:N;T[D]={type:S?M:Q,message:G,ref:u,...ae(S?M:Q,G)}};if(a?!Array.isArray(_)||!_.length:b&&(!Re&&($||z(_))||X(_)&&!_||se&&!It(d).isValid||be&&!Tt(d).isValid)){const{value:S,message:A}=_e(b)?{value:!!b,message:b}:de(b);if(S&&(T[D]={type:te.required,message:A,ref:ee,...ae(te.required,A)},!s))return H(A),T}if(!$&&(!z(x)||!z(v))){let S,A;const N=de(v),M=de(x);if(!z(_)&&!isNaN(_)){const Q=u.valueAsNumber||_&&+_;z(N.value)||(S=Q>N.value),z(M.value)||(A=Q<M.value)}else{const Q=u.valueAsDate||new Date(_),G=we=>new Date(new Date().toDateString()+" "+we),he=u.type=="time",ce=u.type=="week";Z(N.value)&&_&&(S=he?G(_)>G(N.value):ce?_>N.value:Q>new Date(N.value)),Z(M.value)&&_&&(A=he?G(_)<G(M.value):ce?_<M.value:Q<new Date(M.value))}if((S||A)&&(K(!!S,N.message,M.message,te.max,te.min),!s))return H(T[D].message),T}if((w||g)&&!$&&(Z(_)||a&&Array.isArray(_))){const S=de(w),A=de(g),N=!z(S.value)&&_.length>+S.value,M=!z(A.value)&&_.length<+A.value;if((N||M)&&(K(N,S.message,A.message),!s))return H(T[D].message),T}if(F&&!$&&Z(_)){const{value:S,message:A}=de(F);if(ke(S)&&!_.match(S)&&(T[D]={type:te.pattern,message:A,ref:u,...ae(te.pattern,A)},!s))return H(A),T}if(R){if(Y(R)){const S=await R(_,t),A=wt(S,ee);if(A&&(T[D]={...A,...ae(te.validate,A.message)},!s))return H(A.message),T}else if(C(R)){let S={};for(const A in R){if(!B(S)&&!s)break;const N=wt(await R[A](_,t),ee,A);N&&(S={...N,...ae(A,N.message)},H(N.message),s&&(T[D]=S))}if(!B(S)&&(T[D]={ref:ee,...S},!s))return T}}return H(!0),T};const ss={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function is(e={}){let r={...ss,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Y(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},s={},n=C(r.defaultValues)||C(r.values)?L(r.defaultValues||r.values)||{}:{},a=r.shouldUnregister?{}:L(n),u={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,w=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...g};const v={array:ft(),state:ft()},F=r.criteriaMode===W.all,R=i=>o=>{clearTimeout(w),w=setTimeout(i,o)},D=async i=>{if(!r.disabled&&(g.isValid||x.isValid||i)){const o=r.resolver?B((await se()).errors):await $(s,!0);o!==t.isValid&&v.state.next({isValid:o})}},re=(i,o)=>{!r.disabled&&(g.isValidating||g.validatingFields||x.isValidating||x.validatingFields)&&((i||Array.from(d.mount)).forEach(c=>{c&&(o?V(t.validatingFields,c,o):I(t.validatingFields,c))}),v.state.next({validatingFields:t.validatingFields,isValidating:!B(t.validatingFields)}))},Ce=(i,o=[],c,h,y=!0,f=!0)=>{if(h&&c&&!r.disabled){if(u.action=!0,f&&Array.isArray(m(s,i))){const p=c(m(s,i),h.argA,h.argB);y&&V(s,i,p)}if(f&&Array.isArray(m(t.errors,i))){const p=c(m(t.errors,i),h.argA,h.argB);y&&V(t.errors,i,p),ts(t.errors,i)}if((g.touchedFields||x.touchedFields)&&f&&Array.isArray(m(t.touchedFields,i))){const p=c(m(t.touchedFields,i),h.argA,h.argB);y&&V(t.touchedFields,i,p)}(g.dirtyFields||x.dirtyFields)&&(t.dirtyFields=me(n,a)),v.state.next({name:i,isDirty:K(i,o),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else V(a,i,o)},_=(i,o)=>{V(t.errors,i,o),v.state.next({errors:t.errors})},ee=i=>{t.errors=i,v.state.next({errors:t.errors,isValid:!1})},H=(i,o,c,h)=>{const y=m(s,i);if(y){const f=m(a,i,O(c)?m(n,i):c);O(f)||h&&h.defaultChecked||o?V(a,i,o?f:gt(y._f)):N(i,f),u.mount&&D()}},T=(i,o,c,h,y)=>{let f=!1,p=!1;const E={name:i};if(!r.disabled){if(!c||h){(g.isDirty||x.isDirty)&&(p=t.isDirty,t.isDirty=E.isDirty=K(),f=p!==E.isDirty);const j=ne(m(n,i),o);p=!!m(t.dirtyFields,i),j?I(t.dirtyFields,i):V(t.dirtyFields,i,!0),E.dirtyFields=t.dirtyFields,f=f||(g.dirtyFields||x.dirtyFields)&&p!==!j}if(c){const j=m(t.touchedFields,i);j||(V(t.touchedFields,i,c),E.touchedFields=t.touchedFields,f=f||(g.touchedFields||x.touchedFields)&&j!==c)}f&&y&&v.state.next(E)}return f?E:{}},be=(i,o,c,h)=>{const y=m(t.errors,i),f=(g.isValid||x.isValid)&&X(o)&&t.isValid!==o;if(r.delayError&&c?(b=R(()=>_(i,c)),b(r.delayError)):(clearTimeout(w),b=null,c?V(t.errors,i,c):I(t.errors,i)),(c?!ne(y,c):y)||!B(h)||f){const p={...h,...f&&X(o)?{isValid:o}:{},errors:t.errors,name:i};t={...t,...p},v.state.next(p)}},se=async i=>{re(i,!0);const o=await r.resolver(a,r.context,Kr(i||d.mount,s,r.criteriaMode,r.shouldUseNativeValidation));return re(i),o},Re=async i=>{const{errors:o}=await se(i);if(i)for(const c of i){const h=m(o,c);h?V(t.errors,c,h):I(t.errors,c)}else t.errors=o;return o},$=async(i,o,c={valid:!0})=>{for(const h in i){const y=i[h];if(y){const{_f:f,...p}=y;if(f){const E=d.array.has(f.name),j=y._f&&Gr(y._f);j&&g.validatingFields&&re([h],!0);const q=await St(y,d.disabled,a,F,r.shouldUseNativeValidation&&!o,E);if(j&&g.validatingFields&&re([h]),q[f.name]&&(c.valid=!1,o))break;!o&&(m(q,f.name)?E?rs(t.errors,q,f.name):V(t.errors,f.name,q[f.name]):I(t.errors,f.name))}!B(p)&&await $(p,o,c)}}return c.valid},ae=()=>{for(const i of d.unMount){const o=m(s,i);o&&(o._f.refs?o._f.refs.every(c=>!ze(c)):!ze(o._f.ref))&&Ie(i)}d.unMount=new Set},K=(i,o)=>!r.disabled&&(i&&o&&V(a,i,o),!ne(we(),n)),S=(i,o,c)=>qr(i,d,{...u.mount?a:O(o)?n:Z(i)?{[i]:o}:o},c,o),A=i=>$e(m(u.mount?a:n,i,r.shouldUnregister?m(n,i,[]):[])),N=(i,o,c={})=>{const h=m(s,i);let y=o;if(h){const f=h._f;f&&(!f.disabled&&V(a,i,Ot(o,f)),y=Ae(f.ref)&&z(o)?"":o,Nt(f.ref)?[...f.ref.options].forEach(p=>p.selected=y.includes(p.value)):f.refs?xe(f.ref)?f.refs.forEach(p=>{(!p.defaultChecked||!p.disabled)&&(Array.isArray(y)?p.checked=!!y.find(E=>E===p.value):p.checked=y===p.value||!!y)}):f.refs.forEach(p=>p.checked=p.value===y):Ye(f.ref)?f.ref.value="":(f.ref.value=y,f.ref.type||v.state.next({name:i,values:L(a)})))}(c.shouldDirty||c.shouldTouch)&&T(i,y,c.shouldTouch,c.shouldDirty,!0),c.shouldValidate&&ce(i)},M=(i,o,c)=>{for(const h in o){if(!o.hasOwnProperty(h))return;const y=o[h],f=i+"."+h,p=m(s,f);(d.array.has(i)||C(y)||p&&!p._f)&&!le(y)?M(f,y,c):N(f,y,c)}},Q=(i,o,c={})=>{const h=m(s,i),y=d.array.has(i),f=L(o);V(a,i,f),y?(v.array.next({name:i,values:L(a)}),(g.isDirty||g.dirtyFields||x.isDirty||x.dirtyFields)&&c.shouldDirty&&v.state.next({name:i,dirtyFields:me(n,a),isDirty:K(i,f)})):h&&!h._f&&!z(f)?M(i,f,c):N(i,f,c),xt(i,d)&&v.state.next({...t,name:i}),v.state.next({name:u.mount?i:void 0,values:L(a)})},G=async i=>{u.mount=!0;const o=i.target;let c=o.name,h=!0;const y=m(s,c),f=j=>{h=Number.isNaN(j)||le(j)&&isNaN(j.getTime())||ne(j,m(a,c,j))},p=pt(r.mode),E=pt(r.reValidateMode);if(y){let j,q;const Se=o.type?gt(y._f):Lr(i),ie=i.type===dt.BLUR||i.type===dt.FOCUS_OUT,qt=!Xr(y._f)&&!r.resolver&&!m(t.errors,c)&&!y._f.deps||es(ie,m(t.touchedFields,c),t.isSubmitted,E,p),Le=xt(c,d,ie);V(a,c,Se),ie?(!o||!o.readOnly)&&(y._f.onBlur&&y._f.onBlur(i),b&&b(0)):y._f.onChange&&y._f.onChange(i);const Me=T(c,Se,ie),$t=!B(Me)||Le;if(!ie&&v.state.next({name:c,type:i.type,values:L(a)}),qt)return(g.isValid||x.isValid)&&(r.mode==="onBlur"?ie&&D():ie||D()),$t&&v.state.next({name:c,...Le?{}:Me});if(!ie&&Le&&v.state.next({...t}),r.resolver){const{errors:st}=await se([c]);if(f(Se),h){const Wt=bt(t.errors,s,c),it=bt(st,s,Wt.name||c);j=it.error,c=it.name,q=B(st)}}else re([c],!0),j=(await St(y,d.disabled,a,F,r.shouldUseNativeValidation))[c],re([c]),f(Se),h&&(j?q=!1:(g.isValid||x.isValid)&&(q=await $(s,!0)));h&&(y._f.deps&&ce(y._f.deps),be(c,q,j,Me))}},he=(i,o)=>{if(m(t.errors,o)&&i.focus)return i.focus(),1},ce=async(i,o={})=>{let c,h;const y=pe(i);if(r.resolver){const f=await Re(O(i)?i:y);c=B(f),h=i?!y.some(p=>m(f,p)):c}else i?(h=(await Promise.all(y.map(async f=>{const p=m(s,f);return await $(p&&p._f?{[f]:p}:p)}))).every(Boolean),!(!h&&!t.isValid)&&D()):h=c=await $(s);return v.state.next({...!Z(i)||(g.isValid||x.isValid)&&c!==t.isValid?{}:{name:i},...r.resolver||!i?{isValid:c}:{},errors:t.errors}),o.shouldFocus&&!h&&ve(s,he,i?y:d.mount),h},we=i=>{const o={...u.mount?a:n};return O(i)?o:Z(i)?m(o,i):i.map(c=>m(o,c))},Ke=(i,o)=>({invalid:!!m((o||t).errors,i),isDirty:!!m((o||t).dirtyFields,i),error:m((o||t).errors,i),isValidating:!!m(t.validatingFields,i),isTouched:!!m((o||t).touchedFields,i)}),Lt=i=>{i&&pe(i).forEach(o=>I(t.errors,o)),v.state.next({errors:i?t.errors:{}})},Ge=(i,o,c)=>{const h=(m(s,i,{_f:{}})._f||{}).ref,y=m(t.errors,i)||{},{ref:f,message:p,type:E,...j}=y;V(t.errors,i,{...j,...o,ref:h}),v.state.next({name:i,errors:t.errors,isValid:!1}),c&&c.shouldFocus&&h&&h.focus&&h.focus()},Mt=(i,o)=>Y(i)?v.state.subscribe({next:c=>"values"in c&&i(S(void 0,o),c)}):S(i,o,!0),Xe=i=>v.state.subscribe({next:o=>{Jr(i.name,o.name,i.exact)&&Zr(o,i.formState||g,Bt,i.reRenderRoot)&&i.callback({values:{...a},...t,...o,defaultValues:n})}}).unsubscribe,Pt=i=>(u.mount=!0,x={...x,...i.formState},Xe({...i,formState:x})),Ie=(i,o={})=>{for(const c of i?pe(i):d.mount)d.mount.delete(c),d.array.delete(c),o.keepValue||(I(s,c),I(a,c)),!o.keepError&&I(t.errors,c),!o.keepDirty&&I(t.dirtyFields,c),!o.keepTouched&&I(t.touchedFields,c),!o.keepIsValidating&&I(t.validatingFields,c),!r.shouldUnregister&&!o.keepDefaultValue&&I(n,c);v.state.next({values:L(a)}),v.state.next({...t,...o.keepDirty?{isDirty:K()}:{}}),!o.keepIsValid&&D()},Ze=({disabled:i,name:o})=>{(X(i)&&u.mount||i||d.disabled.has(o))&&(i?d.disabled.add(o):d.disabled.delete(o))},Oe=(i,o={})=>{let c=m(s,i);const h=X(o.disabled)||X(r.disabled);return V(s,i,{...c||{},_f:{...c&&c._f?c._f:{ref:{name:i}},name:i,mount:!0,...o}}),d.mount.add(i),c?Ze({disabled:X(o.disabled)?o.disabled:r.disabled,name:i}):H(i,!0,o.value),{...h?{disabled:o.disabled||r.disabled}:{},...r.progressive?{required:!!o.required,min:ge(o.min),max:ge(o.max),minLength:ge(o.minLength),maxLength:ge(o.maxLength),pattern:ge(o.pattern)}:{},name:i,onChange:G,onBlur:G,ref:y=>{if(y){Oe(i,o),c=m(s,i);const f=O(y.value)&&y.querySelectorAll&&y.querySelectorAll("input,select,textarea")[0]||y,p=Wr(f),E=c._f.refs||[];if(p?E.find(j=>j===f):f===c._f.ref)return;V(s,i,{_f:{...c._f,...p?{refs:[...E.filter(ze),f,...Array.isArray(m(n,i))?[{}]:[]],ref:{type:f.type,name:i}}:{ref:f}}}),H(i,!1,void 0,f)}else c=m(s,i,{}),c._f&&(c._f.mount=!1),(r.shouldUnregister||o.shouldUnregister)&&!(Pr(d.array,i)&&u.action)&&d.unMount.add(i)}}},Te=()=>r.shouldFocusError&&ve(s,he,d.mount),zt=i=>{X(i)&&(v.state.next({disabled:i}),ve(s,(o,c)=>{const h=m(s,c);h&&(o.disabled=h._f.disabled||i,Array.isArray(h._f.refs)&&h._f.refs.forEach(y=>{y.disabled=h._f.disabled||i}))},0,!1))},Je=(i,o)=>async c=>{let h;c&&(c.preventDefault&&c.preventDefault(),c.persist&&c.persist());let y=L(a);if(v.state.next({isSubmitting:!0}),r.resolver){const{errors:f,values:p}=await se();t.errors=f,y=L(p)}else await $(s);if(d.disabled.size)for(const f of d.disabled)I(y,f);if(I(t.errors,"root"),B(t.errors)){v.state.next({errors:{}});try{await i(y,c)}catch(f){h=f}}else o&&await o({...t.errors},c),Te(),setTimeout(Te);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},Ut=(i,o={})=>{m(s,i)&&(O(o.defaultValue)?Q(i,L(m(n,i))):(Q(i,o.defaultValue),V(n,i,L(o.defaultValue))),o.keepTouched||I(t.touchedFields,i),o.keepDirty||(I(t.dirtyFields,i),t.isDirty=o.defaultValue?K(i,L(m(n,i))):K()),o.keepError||(I(t.errors,i),g.isValid&&D()),v.state.next({...t}))},et=(i,o={})=>{const c=i?L(i):n,h=L(c),y=B(i),f=y?n:h;if(o.keepDefaultValues||(n=c),!o.keepValues){if(o.keepDirtyValues){const p=new Set([...d.mount,...Object.keys(me(n,a))]);for(const E of Array.from(p))m(t.dirtyFields,E)?V(f,E,m(a,E)):Q(E,m(f,E))}else{if(qe&&O(i))for(const p of d.mount){const E=m(s,p);if(E&&E._f){const j=Array.isArray(E._f.refs)?E._f.refs[0]:E._f.ref;if(Ae(j)){const q=j.closest("form");if(q){q.reset();break}}}}if(o.keepFieldsRef)for(const p of d.mount)Q(p,m(f,p));else s={}}a=r.shouldUnregister?o.keepDefaultValues?L(n):{}:L(f),v.array.next({values:{...f}}),v.state.next({values:{...f}})}d={mount:o.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!o.keepIsValid||!!o.keepDirtyValues,u.watch=!!r.shouldUnregister,v.state.next({submitCount:o.keepSubmitCount?t.submitCount:0,isDirty:y?!1:o.keepDirty?t.isDirty:!!(o.keepDefaultValues&&!ne(i,n)),isSubmitted:o.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:y?{}:o.keepDirtyValues?o.keepDefaultValues&&a?me(n,a):t.dirtyFields:o.keepDefaultValues&&i?me(n,i):o.keepDirty?t.dirtyFields:{},touchedFields:o.keepTouched?t.touchedFields:{},errors:o.keepErrors?t.errors:{},isSubmitSuccessful:o.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},tt=(i,o)=>et(Y(i)?i(a):i,o),Qt=(i,o={})=>{const c=m(s,i),h=c&&c._f;if(h){const y=h.refs?h.refs[0]:h.ref;y.focus&&(y.focus(),o.shouldSelect&&Y(y.select)&&y.select())}},Bt=i=>{t={...t,...i}},rt={control:{register:Oe,unregister:Ie,getFieldState:Ke,handleSubmit:Je,setError:Ge,_subscribe:Xe,_runSchema:se,_focusError:Te,_getWatch:S,_getDirty:K,_setValid:D,_setFieldArray:Ce,_setDisabledField:Ze,_setErrors:ee,_getFieldArray:A,_reset:et,_resetDefaultValues:()=>Y(r.defaultValues)&&r.defaultValues().then(i=>{tt(i,r.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:ae,_disableForm:zt,_subjects:v,_proxyFormState:g,get _fields(){return s},get _formValues(){return a},get _state(){return u},set _state(i){u=i},get _defaultValues(){return n},get _names(){return d},set _names(i){d=i},get _formState(){return t},get _options(){return r},set _options(i){r={...r,...i}}},subscribe:Pt,trigger:ce,register:Oe,handleSubmit:Je,watch:Mt,setValue:Q,getValues:we,reset:tt,resetField:Ut,clearErrors:Lt,unregister:Ie,setError:Ge,setFocus:Qt,getFieldState:Ke};return{...rt,formControl:rt}}function ns(e={}){const r=P.useRef(void 0),t=P.useRef(void 0),[s,n]=P.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:s},e.defaultValues&&!Y(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...d}=is(e);r.current={...d,formState:s}}const a=r.current.control;return a._options=e,Br(()=>{const u=a._subscribe({formState:a._proxyFormState,callback:()=>n({...a._formState}),reRenderRoot:!0});return n(d=>({...d,isReady:!0})),a._formState.isReady=!0,u},[a]),P.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),P.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),P.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),P.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),P.useEffect(()=>{if(a._proxyFormState.isDirty){const u=a._getDirty();u!==s.isDirty&&a._subjects.state.next({isDirty:u})}},[a,s.isDirty]),P.useEffect(()=>{e.values&&!ne(e.values,t.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),t.current=e.values,n(u=>({...u}))):a._resetDefaultValues()},[a,e.values]),P.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),r.current.formState=Qr(s,a),r.current}const as=()=>{const{submitEmail:e}=J(),[r,t]=U.useState(!1),{register:s,handleSubmit:n,formState:{errors:a,isValid:u},setFocus:d}=ns({defaultValues:{subscribeToBulletin:!0}});U.useEffect(()=>{d("email")},[d]),U.useEffect(()=>{const w=g=>{g.key==="Enter"&&u&&n(b)()};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[u,n]);const b=async w=>{t(!0);try{await new Promise(g=>setTimeout(g,1e3)),e(w.email,w.subscribeToBulletin)}catch(g){console.error("Email submission error:",g),t(!1)}};return l.jsx(k.section,{className:"section active",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"email-content",children:[l.jsx(Fe,{}),l.jsx(k.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:"Challenge Complete!"}),l.jsx(k.p,{className:"email-subtitle",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Get your detailed Cartridge Knowledge Profile with historical context, percentile ranking, and explanations for each cartridge."}),l.jsxs(k.form,{className:"email-form",onSubmit:n(b),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[l.jsx("input",{type:"email",placeholder:"Enter your email address",...s("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),style:a.email?{borderColor:"#dc3545"}:{}}),l.jsx(fe,{type:"submit",disabled:!u||r,children:r?"Sending...":"Get My Results"})]}),a.email&&l.jsx(k.p,{style:{color:"#dc3545",fontSize:"14px",marginTop:"10px"},initial:{opacity:0},animate:{opacity:1},children:a.email.message}),l.jsxs(k.div,{className:"bulletin-checkbox",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:[l.jsx("input",{type:"checkbox",id:"bulletinOptOut",...s("subscribeToBulletin")}),l.jsx("label",{htmlFor:"bulletinOptOut",children:"I would like to receive the Ammo.com BULLETin for weekly ammo discounts and insights"})]})]})})})},os=()=>{const{score:e,quizData:r,maxStreak:t,getTier:s,getAchievements:n,retakeQuiz:a}=J(),u=s(e),d=n(),b=Math.round(e/r.length*100),w=()=>{oe.socialShare("twitter",e,u.name);const x=`I just scored ${e}/${r.length} on the Cartridge Detective Challenge and earned the rank of ${u.name}! Can you beat my score?`,v=encodeURIComponent(window.location.href);window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(x)}&url=${v}`,"_blank")},g=()=>{oe.socialShare("facebook",e,u.name);const x=encodeURIComponent(window.location.href);window.open(`https://www.facebook.com/sharer/sharer.php?u=${x}`,"_blank")};return l.jsx(k.section,{className:"section active",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"results-content",children:[l.jsx(Fe,{}),l.jsxs("div",{className:"results-header",children:[l.jsx(k.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:"Your Detective Results"}),l.jsxs(k.div,{className:"score-display",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.5},children:[l.jsx("span",{className:"score-number",children:e}),l.jsxs("span",{className:"score-total",children:["/ ",r.length]})]})]}),l.jsxs(k.div,{className:"tier-badge",style:{borderColor:e>=10?"#bf9400":e>=7?"#99161d":"#464648"},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},children:[l.jsx("div",{className:"tier-icon",children:u.icon}),l.jsx("h3",{className:"tier-title",children:u.name}),l.jsx("p",{className:"tier-description",children:u.description})]}),l.jsxs(k.div,{className:"results-breakdown",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[l.jsx("h4",{children:"Performance Summary"}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Cartridges Identified:"}),l.jsx("span",{children:e})]}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Accuracy Rate:"}),l.jsxs("span",{children:[b,"%"]})]}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Best Streak:"}),l.jsx("span",{children:t})]})]}),d.length>0&&l.jsx(k.div,{className:"achievements",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},children:d.map((x,v)=>l.jsxs("div",{className:"achievement-badge",children:[l.jsx("span",{className:"achievement-icon",children:x.icon}),l.jsx("span",{className:"achievement-text",children:x.text})]},v))}),l.jsxs(k.div,{className:"email-sent-notice",style:{background:"#1d1d1d",border:"2px solid #28a745",borderRadius:"8px",padding:"20px",margin:"30px 0",textAlign:"center"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.2},children:[l.jsx("h4",{style:{color:"#28a745",marginBottom:"10px"},children:"📧 Results Sent!"}),l.jsx("p",{style:{color:"#cccccc"},children:"Check your email for detailed explanations, historical context, and your complete Cartridge Knowledge Profile."})]}),l.jsxs(k.div,{style:{margin:"30px 0"},initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4},children:[l.jsx("h4",{style:{color:"#bf9400",marginBottom:"15px"},children:"Share Your Results"}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",flexWrap:"wrap"},children:[l.jsx(fe,{variant:"social",onClick:w,children:"Share on Twitter"}),l.jsx(fe,{variant:"social",onClick:g,children:"Share on Facebook"})]})]}),l.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.6},children:l.jsx(fe,{variant:"secondary",onClick:a,children:"Take Challenge Again"})})]})})})};function ls(){const{currentSection:e,trackEvent:r}=J();U.useEffect(()=>{r("quiz_page_loaded")},[r]);const t=()=>{switch(e){case"landing":return l.jsx(ut,{});case"quiz":return l.jsx(Tr,{});case"emailCapture":return l.jsx(as,{});case"results":return l.jsx(os,{});default:return l.jsx(ut,{})}};return l.jsx("div",{className:"App",children:l.jsx(Ue,{mode:"wait",children:t()})})}Qe.createRoot(document.getElementById("root")).render(l.jsx(P.StrictMode,{children:l.jsx(ls,{})}));
